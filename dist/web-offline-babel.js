require=function(){return function r(e,t,i){function o(s,a){if(!t[s]){if(!e[s]){var l="function"==typeof require&&require;if(!a&&l)return l(s,!0);if(n)return n(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var u=t[s]={exports:{}};e[s][0].call(u.exports,function(t){return o(e[s][1][t]||t)},u,u.exports,r,e,t,i)}return t[s].exports}for(var n="function"==typeof require&&require,s=0;s<i.length;s++)o(i[s]);return o}}()({1:[function(e,t,r){e("../../modules/es6.string.iterator");e("../../modules/es6.array.from");t.exports=e("../../modules/_core").Array.from},{"../../modules/_core":21,"../../modules/es6.array.from":84,"../../modules/es6.string.iterator":96}],2:[function(e,t,r){e("../modules/web.dom.iterable");e("../modules/es6.string.iterator");t.exports=e("../modules/core.get-iterator")},{"../modules/core.get-iterator":83,"../modules/es6.string.iterator":96,"../modules/web.dom.iterable":100}],3:[function(e,t,r){var i=e("../../modules/_core"),n=i.JSON||(i.JSON={stringify:JSON.stringify});t.exports=function stringify(e){return n.stringify.apply(n,arguments)}},{"../../modules/_core":21}],4:[function(e,t,r){e("../../modules/es6.math.clz32");t.exports=e("../../modules/_core").Math.clz32},{"../../modules/_core":21,"../../modules/es6.math.clz32":86}],5:[function(e,t,r){e("../../modules/es6.math.fround");t.exports=e("../../modules/_core").Math.fround},{"../../modules/_core":21,"../../modules/es6.math.fround":87}],6:[function(e,t,r){e("../../modules/es6.math.imul");t.exports=e("../../modules/_core").Math.imul},{"../../modules/_core":21,"../../modules/es6.math.imul":88}],7:[function(e,t,r){e("../../modules/es6.math.trunc");t.exports=e("../../modules/_core").Math.trunc},{"../../modules/_core":21,"../../modules/es6.math.trunc":89}],8:[function(e,t,r){e("../../modules/es6.number.is-integer");t.exports=e("../../modules/_core").Number.isInteger},{"../../modules/_core":21,"../../modules/es6.number.is-integer":90}],9:[function(e,t,r){e("../../modules/es6.number.max-safe-integer");t.exports=9007199254740991},{"../../modules/es6.number.max-safe-integer":91}],10:[function(e,t,r){e("../../modules/es6.object.freeze");t.exports=e("../../modules/_core").Object.freeze},{"../../modules/_core":21,"../../modules/es6.object.freeze":92}],11:[function(e,t,r){e("../../modules/es6.object.keys");t.exports=e("../../modules/_core").Object.keys},{"../../modules/_core":21,"../../modules/es6.object.keys":93}],12:[function(e,t,r){e("../../modules/es7.object.values");t.exports=e("../../modules/_core").Object.values},{"../../modules/_core":21,"../../modules/es7.object.values":97}],13:[function(e,t,r){e("../modules/es6.object.to-string");e("../modules/es6.string.iterator");e("../modules/web.dom.iterable");e("../modules/es6.promise");e("../modules/es7.promise.finally");e("../modules/es7.promise.try");t.exports=e("../modules/_core").Promise},{"../modules/_core":21,"../modules/es6.object.to-string":94,"../modules/es6.promise":95,"../modules/es6.string.iterator":96,"../modules/es7.promise.finally":98,"../modules/es7.promise.try":99,"../modules/web.dom.iterable":100}],14:[function(e,t,r){t.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},{}],15:[function(e,t,r){t.exports=function(){}},{}],16:[function(e,t,r){t.exports=function(e,t,r,i){if(!(e instanceof t)||i!==undefined&&i in e)throw TypeError(r+": incorrect invocation!");return e}},{}],17:[function(e,t,r){var i=e("./_is-object");t.exports=function(e){if(!i(e))throw TypeError(e+" is not an object!");return e}},{"./_is-object":40}],18:[function(e,t,r){var i=e("./_to-iobject"),n=e("./_to-length"),o=e("./_to-absolute-index");t.exports=function(e){return function(t,r,s){var a,l=i(t),c=n(l.length),u=o(s,c);if(e&&r!=r){for(;c>u;)if((a=l[u++])!=a)return!0}else for(;c>u;u++)if((e||u in l)&&l[u]===r)return e||u||0;return!e&&-1}}},{"./_to-absolute-index":74,"./_to-iobject":76,"./_to-length":77}],19:[function(e,t,r){var i=e("./_cof"),n=e("./_wks")("toStringTag"),o="Arguments"==i(function(){return arguments}());t.exports=function(e){var t,r,s;return e===undefined?"Undefined":null===e?"Null":"string"==typeof(r=function(e,t){try{return e[t]}catch(r){}}(t=Object(e),n))?r:o?i(t):"Object"==(s=i(t))&&"function"==typeof t.callee?"Arguments":s}},{"./_cof":20,"./_wks":81}],20:[function(e,t,r){var i={}.toString;t.exports=function(e){return i.call(e).slice(8,-1)}},{}],21:[function(e,t,r){var i=t.exports={version:"2.5.5"};"number"==typeof __e&&(__e=i)},{}],22:[function(e,t,r){"use strict";var i=e("./_object-dp"),n=e("./_property-desc");t.exports=function(e,t,r){t in e?i.f(e,t,n(0,r)):e[t]=r}},{"./_object-dp":54,"./_property-desc":64}],23:[function(e,t,r){var i=e("./_a-function");t.exports=function(e,t,r){i(e);if(t===undefined)return e;switch(r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,i){return e.call(t,r,i)};case 3:return function(r,i,n){return e.call(t,r,i,n)}}return function(){return e.apply(t,arguments)}}},{"./_a-function":14}],24:[function(e,t,r){t.exports=function(e){if(e==undefined)throw TypeError("Can't call method on  "+e);return e}},{}],25:[function(e,t,r){t.exports=!e("./_fails")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},{"./_fails":29}],26:[function(e,t,r){var i=e("./_is-object"),n=e("./_global").document,o=i(n)&&i(n.createElement);t.exports=function(e){return o?n.createElement(e):{}}},{"./_global":31,"./_is-object":40}],27:[function(e,t,r){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},{}],28:[function(e,t,r){var i=e("./_global"),n=e("./_core"),o=e("./_ctx"),s=e("./_hide"),a=e("./_has"),l=function(e,t,r){var c,u,f,h=e&l.F,d=e&l.G,_=e&l.S,g=e&l.P,p=e&l.B,y=e&l.W,m=d?n:n[t]||(n[t]={}),b=m.prototype,w=d?i:_?i[t]:(i[t]||{}).prototype;d&&(r=t);for(c in r)if(!(u=!h&&w&&w[c]!==undefined)||!a(m,c)){f=u?w[c]:r[c];m[c]=d&&"function"!=typeof w[c]?r[c]:p&&u?o(f,i):y&&w[c]==f?function(e){var t=function(t,r,i){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,r)}return new e(t,r,i)}return e.apply(this,arguments)};t.prototype=e.prototype;return t}(f):g&&"function"==typeof f?o(Function.call,f):f;if(g){(m.virtual||(m.virtual={}))[c]=f;e&l.R&&b&&!b[c]&&s(b,c,f)}}};l.F=1;l.G=2;l.S=4;l.P=8;l.B=16;l.W=32;l.U=64;l.R=128;t.exports=l},{"./_core":21,"./_ctx":23,"./_global":31,"./_has":32,"./_hide":33}],29:[function(e,t,r){t.exports=function(e){try{return!!e()}catch(t){return!0}}},{}],30:[function(e,t,r){var i=e("./_ctx"),n=e("./_iter-call"),o=e("./_is-array-iter"),s=e("./_an-object"),a=e("./_to-length"),l=e("./core.get-iterator-method"),c={},u={};(r=t.exports=function(e,t,r,f,h){var d,_,g,p,y=h?function(){return e}:l(e),m=i(r,f,t?2:1),b=0;if("function"!=typeof y)throw TypeError(e+" is not iterable!");if(o(y)){for(d=a(e.length);d>b;b++)if((p=t?m(s(_=e[b])[0],_[1]):m(e[b]))===c||p===u)return p}else for(g=y.call(e);!(_=g.next()).done;)if((p=n(g,m,_.value,t))===c||p===u)return p}).BREAK=c;r.RETURN=u},{"./_an-object":17,"./_ctx":23,"./_is-array-iter":38,"./_iter-call":41,"./_to-length":77,"./core.get-iterator-method":82}],31:[function(e,t,r){var i=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=i)},{}],32:[function(e,t,r){var i={}.hasOwnProperty;t.exports=function(e,t){return i.call(e,t)}},{}],33:[function(e,t,r){var i=e("./_object-dp"),n=e("./_property-desc");t.exports=e("./_descriptors")?function(e,t,r){return i.f(e,t,n(1,r))}:function(e,t,r){e[t]=r;return e}},{"./_descriptors":25,"./_object-dp":54,"./_property-desc":64}],34:[function(e,t,r){var i=e("./_global").document;t.exports=i&&i.documentElement},{"./_global":31}],35:[function(e,t,r){t.exports=!e("./_descriptors")&&!e("./_fails")(function(){return 7!=Object.defineProperty(e("./_dom-create")("div"),"a",{get:function(){return 7}}).a})},{"./_descriptors":25,"./_dom-create":26,"./_fails":29}],36:[function(e,t,r){t.exports=function(e,t,r){var i=r===undefined;switch(t.length){case 0:return i?e():e.call(r);case 1:return i?e(t[0]):e.call(r,t[0]);case 2:return i?e(t[0],t[1]):e.call(r,t[0],t[1]);case 3:return i?e(t[0],t[1],t[2]):e.call(r,t[0],t[1],t[2]);case 4:return i?e(t[0],t[1],t[2],t[3]):e.call(r,t[0],t[1],t[2],t[3])}return e.apply(r,t)}},{}],37:[function(e,t,r){var i=e("./_cof");t.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==i(e)?e.split(""):Object(e)}},{"./_cof":20}],38:[function(e,t,r){var i=e("./_iterators"),n=e("./_wks")("iterator"),o=Array.prototype;t.exports=function(e){return e!==undefined&&(i.Array===e||o[n]===e)}},{"./_iterators":46,"./_wks":81}],39:[function(e,t,r){var i=e("./_is-object"),n=Math.floor;t.exports=function isInteger(e){return!i(e)&&isFinite(e)&&n(e)===e}},{"./_is-object":40}],40:[function(e,t,r){t.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},{}],41:[function(e,t,r){var i=e("./_an-object");t.exports=function(e,t,r,n){try{return n?t(i(r)[0],r[1]):t(r)}catch(s){var o=e["return"];o!==undefined&&i(o.call(e));throw s}}},{"./_an-object":17}],42:[function(e,t,r){"use strict";var i=e("./_object-create"),n=e("./_property-desc"),o=e("./_set-to-string-tag"),s={};e("./_hide")(s,e("./_wks")("iterator"),function(){return this});t.exports=function(e,t,r){e.prototype=i(s,{next:n(1,r)});o(e,t+" Iterator")}},{"./_hide":33,"./_object-create":53,"./_property-desc":64,"./_set-to-string-tag":68,"./_wks":81}],43:[function(e,t,r){"use strict";var i=e("./_library"),n=e("./_export"),o=e("./_redefine"),s=e("./_hide"),a=e("./_iterators"),l=e("./_iter-create"),c=e("./_set-to-string-tag"),u=e("./_object-gpo"),f=e("./_wks")("iterator"),h=!([].keys&&"next"in[].keys()),d=function(){return this};t.exports=function(e,t,r,_,g,p,y){l(r,t,_);var m,b,w,v=function(e){if(!h&&e in E)return E[e];switch(e){case"keys":return function keys(){return new r(this,e)};case"values":return function values(){return new r(this,e)}}return function entries(){return new r(this,e)}},S=t+" Iterator",A="values"==g,P=!1,E=e.prototype,U=E[f]||E["@@iterator"]||g&&E[g],k=U||v(g),I=g?A?v("entries"):k:undefined,N="Array"==t&&E.entries||U;if(N&&(w=u(N.call(new e)))!==Object.prototype&&w.next){c(w,S,!0);i||"function"==typeof w[f]||s(w,f,d)}if(A&&U&&"values"!==U.name){P=!0;k=function values(){return U.call(this)}}i&&!y||!h&&!P&&E[f]||s(E,f,k);a[t]=k;a[S]=d;if(g){m={values:A?k:v("values"),keys:p?k:v("keys"),entries:I};if(y)for(b in m)b in E||o(E,b,m[b]);else n(n.P+n.F*(h||P),t,m)}return m}},{"./_export":28,"./_hide":33,"./_iter-create":42,"./_iterators":46,"./_library":47,"./_object-gpo":56,"./_redefine":66,"./_set-to-string-tag":68,"./_wks":81}],44:[function(e,t,r){var i=e("./_wks")("iterator"),n=!1;try{var o=[7][i]();o["return"]=function(){n=!0};Array.from(o,function(){throw 2})}catch(s){}t.exports=function(e,t){if(!t&&!n)return!1;var r=!1;try{var o=[7],a=o[i]();a.next=function(){return{done:r=!0}};o[i]=function(){return a};e(o)}catch(s){}return r}},{"./_wks":81}],45:[function(e,t,r){t.exports=function(e,t){return{value:t,done:!!e}}},{}],46:[function(e,t,r){t.exports={}},{}],47:[function(e,t,r){t.exports=!0},{}],48:[function(e,t,r){var i=e("./_math-sign"),n=Math.pow,o=n(2,-52),s=n(2,-23),a=n(2,127)*(2-s),l=n(2,-126);t.exports=Math.fround||function fround(e){var t,r,n=Math.abs(e),c=i(e);return n<l?c*(n/l/s+1/o-1/o)*l*s:(r=(t=(1+s/o)*n)-(t-n))>a||r!=r?c*Infinity:c*r}},{"./_math-sign":49}],49:[function(e,t,r){t.exports=Math.sign||function sign(e){return 0==(e=+e)||e!=e?e:e<0?-1:1}},{}],50:[function(e,t,r){var i=e("./_uid")("meta"),n=e("./_is-object"),o=e("./_has"),s=e("./_object-dp").f,a=0,l=Object.isExtensible||function(){return!0},c=!e("./_fails")(function(){return l(Object.preventExtensions({}))}),u=function(e){s(e,i,{value:{i:"O"+ ++a,w:{}}})},f=t.exports={KEY:i,NEED:!1,fastKey:function(e,t){if(!n(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,i)){if(!l(e))return"F";if(!t)return"E";u(e)}return e[i].i},getWeak:function(e,t){if(!o(e,i)){if(!l(e))return!0;if(!t)return!1;u(e)}return e[i].w},onFreeze:function(e){c&&f.NEED&&l(e)&&!o(e,i)&&u(e);return e}}},{"./_fails":29,"./_has":32,"./_is-object":40,"./_object-dp":54,"./_uid":80}],51:[function(e,t,r){var i=e("./_global"),n=e("./_task").set,o=i.MutationObserver||i.WebKitMutationObserver,s=i.process,a=i.Promise,l="process"==e("./_cof")(s);t.exports=function(){var e,t,r,c=function(){var i,n;l&&(i=s.domain)&&i.exit();for(;e;){n=e.fn;e=e.next;try{n()}catch(o){e?r():t=undefined;throw o}}t=undefined;i&&i.enter()};if(l)r=function(){s.nextTick(c)};else if(!o||i.navigator&&i.navigator.standalone)if(a&&a.resolve){var u=a.resolve();r=function(){u.then(c)}}else r=function(){n.call(i,c)};else{var f=!0,h=document.createTextNode("");new o(c).observe(h,{characterData:!0});r=function(){h.data=f=!f}}return function(i){var n={fn:i,next:undefined};t&&(t.next=n);if(!e){e=n;r()}t=n}}},{"./_cof":20,"./_global":31,"./_task":73}],52:[function(e,t,r){"use strict";var i=e("./_a-function");t.exports.f=function(e){return new function PromiseCapability(e){var t,r;this.promise=new e(function(e,i){if(t!==undefined||r!==undefined)throw TypeError("Bad Promise constructor");t=e;r=i});this.resolve=i(t);this.reject=i(r)}(e)}},{"./_a-function":14}],53:[function(e,t,r){var i=e("./_an-object"),n=e("./_object-dps"),o=e("./_enum-bug-keys"),s=e("./_shared-key")("IE_PROTO"),a=function(){},l=function(){var t,r=e("./_dom-create")("iframe"),i=o.length;r.style.display="none";e("./_html").appendChild(r);r.src="javascript:";(t=r.contentWindow.document).open();t.write("<script>document.F=Object<\/script>");t.close();l=t.F;for(;i--;)delete l.prototype[o[i]];return l()};t.exports=Object.create||function create(e,t){var r;if(null!==e){a.prototype=i(e);r=new a;a.prototype=null;r[s]=e}else r=l();return t===undefined?r:n(r,t)}},{"./_an-object":17,"./_dom-create":26,"./_enum-bug-keys":27,"./_html":34,"./_object-dps":55,"./_shared-key":69}],54:[function(e,t,r){var i=e("./_an-object"),n=e("./_ie8-dom-define"),o=e("./_to-primitive"),s=Object.defineProperty;r.f=e("./_descriptors")?Object.defineProperty:function defineProperty(e,t,r){i(e);t=o(t,!0);i(r);if(n)try{return s(e,t,r)}catch(a){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");"value"in r&&(e[t]=r.value);return e}},{"./_an-object":17,"./_descriptors":25,"./_ie8-dom-define":35,"./_to-primitive":79}],55:[function(e,t,r){var i=e("./_object-dp"),n=e("./_an-object"),o=e("./_object-keys");t.exports=e("./_descriptors")?Object.defineProperties:function defineProperties(e,t){n(e);for(var r,s=o(t),a=s.length,l=0;a>l;)i.f(e,r=s[l++],t[r]);return e}},{"./_an-object":17,"./_descriptors":25,"./_object-dp":54,"./_object-keys":58}],56:[function(e,t,r){var i=e("./_has"),n=e("./_to-object"),o=e("./_shared-key")("IE_PROTO"),s=Object.prototype;t.exports=Object.getPrototypeOf||function(e){e=n(e);return i(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?s:null}},{"./_has":32,"./_shared-key":69,"./_to-object":78}],57:[function(e,t,r){var i=e("./_has"),n=e("./_to-iobject"),o=e("./_array-includes")(!1),s=e("./_shared-key")("IE_PROTO");t.exports=function(e,t){var r,a=n(e),l=0,c=[];for(r in a)r!=s&&i(a,r)&&c.push(r);for(;t.length>l;)i(a,r=t[l++])&&(~o(c,r)||c.push(r));return c}},{"./_array-includes":18,"./_has":32,"./_shared-key":69,"./_to-iobject":76}],58:[function(e,t,r){var i=e("./_object-keys-internal"),n=e("./_enum-bug-keys");t.exports=Object.keys||function keys(e){return i(e,n)}},{"./_enum-bug-keys":27,"./_object-keys-internal":57}],59:[function(e,t,r){r.f={}.propertyIsEnumerable},{}],60:[function(e,t,r){var i=e("./_export"),n=e("./_core"),o=e("./_fails");t.exports=function(e,t){var r=(n.Object||{})[e]||Object[e],s={};s[e]=t(r);i(i.S+i.F*o(function(){r(1)}),"Object",s)}},{"./_core":21,"./_export":28,"./_fails":29}],61:[function(e,t,r){var i=e("./_object-keys"),n=e("./_to-iobject"),o=e("./_object-pie").f;t.exports=function(e){return function(t){for(var r,s=n(t),a=i(s),l=a.length,c=0,u=[];l>c;)o.call(s,r=a[c++])&&u.push(e?[r,s[r]]:s[r]);return u}}},{"./_object-keys":58,"./_object-pie":59,"./_to-iobject":76}],62:[function(e,t,r){t.exports=function(e){try{return{e:!1,v:e()}}catch(t){return{e:!0,v:t}}}},{}],63:[function(e,t,r){var i=e("./_an-object"),n=e("./_is-object"),o=e("./_new-promise-capability");t.exports=function(e,t){i(e);if(n(t)&&t.constructor===e)return t;var r=o.f(e);(0,r.resolve)(t);return r.promise}},{"./_an-object":17,"./_is-object":40,"./_new-promise-capability":52}],64:[function(e,t,r){t.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},{}],65:[function(e,t,r){var i=e("./_hide");t.exports=function(e,t,r){for(var n in t)r&&e[n]?e[n]=t[n]:i(e,n,t[n]);return e}},{"./_hide":33}],66:[function(e,t,r){t.exports=e("./_hide")},{"./_hide":33}],67:[function(e,t,r){"use strict";var i=e("./_global"),n=e("./_core"),o=e("./_object-dp"),s=e("./_descriptors"),a=e("./_wks")("species");t.exports=function(e){var t="function"==typeof n[e]?n[e]:i[e];s&&t&&!t[a]&&o.f(t,a,{configurable:!0,get:function(){return this}})}},{"./_core":21,"./_descriptors":25,"./_global":31,"./_object-dp":54,"./_wks":81}],68:[function(e,t,r){var i=e("./_object-dp").f,n=e("./_has"),o=e("./_wks")("toStringTag");t.exports=function(e,t,r){e&&!n(e=r?e:e.prototype,o)&&i(e,o,{configurable:!0,value:t})}},{"./_has":32,"./_object-dp":54,"./_wks":81}],69:[function(e,t,r){var i=e("./_shared")("keys"),n=e("./_uid");t.exports=function(e){return i[e]||(i[e]=n(e))}},{"./_shared":70,"./_uid":80}],70:[function(e,t,r){var i=e("./_global"),n=i["__core-js_shared__"]||(i["__core-js_shared__"]={});t.exports=function(e){return n[e]||(n[e]={})}},{"./_global":31}],71:[function(e,t,r){var i=e("./_an-object"),n=e("./_a-function"),o=e("./_wks")("species");t.exports=function(e,t){var r,s=i(e).constructor;return s===undefined||(r=i(s)[o])==undefined?t:n(r)}},{"./_a-function":14,"./_an-object":17,"./_wks":81}],72:[function(e,t,r){var i=e("./_to-integer"),n=e("./_defined");t.exports=function(e){return function(t,r){var o,s,a=String(n(t)),l=i(r),c=a.length;return l<0||l>=c?e?"":undefined:(o=a.charCodeAt(l))<55296||o>56319||l+1===c||(s=a.charCodeAt(l+1))<56320||s>57343?e?a.charAt(l):o:e?a.slice(l,l+2):s-56320+(o-55296<<10)+65536}}},{"./_defined":24,"./_to-integer":75}],73:[function(e,t,r){var i,n,o,s=e("./_ctx"),a=e("./_invoke"),l=e("./_html"),c=e("./_dom-create"),u=e("./_global"),f=u.process,h=u.setImmediate,d=u.clearImmediate,_=u.MessageChannel,g=u.Dispatch,p=0,y={},m=function(){var e=+this;if(y.hasOwnProperty(e)){var t=y[e];delete y[e];t()}},b=function(e){m.call(e.data)};if(!h||!d){h=function setImmediate(e){for(var t=[],r=1;arguments.length>r;)t.push(arguments[r++]);y[++p]=function(){a("function"==typeof e?e:Function(e),t)};i(p);return p};d=function clearImmediate(e){delete y[e]};if("process"==e("./_cof")(f))i=function(e){f.nextTick(s(m,e,1))};else if(g&&g.now)i=function(e){g.now(s(m,e,1))};else if(_){o=(n=new _).port2;n.port1.onmessage=b;i=s(o.postMessage,o,1)}else if(u.addEventListener&&"function"==typeof postMessage&&!u.importScripts){i=function(e){u.postMessage(e+"","*")};u.addEventListener("message",b,!1)}else i="onreadystatechange"in c("script")?function(e){l.appendChild(c("script")).onreadystatechange=function(){l.removeChild(this);m.call(e)}}:function(e){setTimeout(s(m,e,1),0)}}t.exports={set:h,clear:d}},{"./_cof":20,"./_ctx":23,"./_dom-create":26,"./_global":31,"./_html":34,"./_invoke":36}],74:[function(e,t,r){var i=e("./_to-integer"),n=Math.max,o=Math.min;t.exports=function(e,t){return(e=i(e))<0?n(e+t,0):o(e,t)}},{"./_to-integer":75}],75:[function(e,t,r){var i=Math.ceil,n=Math.floor;t.exports=function(e){return isNaN(e=+e)?0:(e>0?n:i)(e)}},{}],76:[function(e,t,r){var i=e("./_iobject"),n=e("./_defined");t.exports=function(e){return i(n(e))}},{"./_defined":24,"./_iobject":37}],77:[function(e,t,r){var i=e("./_to-integer"),n=Math.min;t.exports=function(e){return e>0?n(i(e),9007199254740991):0}},{"./_to-integer":75}],78:[function(e,t,r){var i=e("./_defined");t.exports=function(e){return Object(i(e))}},{"./_defined":24}],79:[function(e,t,r){var i=e("./_is-object");t.exports=function(e,t){if(!i(e))return e;var r,n;if(t&&"function"==typeof(r=e.toString)&&!i(n=r.call(e)))return n;if("function"==typeof(r=e.valueOf)&&!i(n=r.call(e)))return n;if(!t&&"function"==typeof(r=e.toString)&&!i(n=r.call(e)))return n;throw TypeError("Can't convert object to primitive value")}},{"./_is-object":40}],80:[function(e,t,r){var i=0,n=Math.random();t.exports=function(e){return"Symbol(".concat(e===undefined?"":e,")_",(++i+n).toString(36))}},{}],81:[function(e,t,r){var i=e("./_shared")("wks"),n=e("./_uid"),o=e("./_global").Symbol,s="function"==typeof o;(t.exports=function(e){return i[e]||(i[e]=s&&o[e]||(s?o:n)("Symbol."+e))}).store=i},{"./_global":31,"./_shared":70,"./_uid":80}],82:[function(e,t,r){var i=e("./_classof"),n=e("./_wks")("iterator"),o=e("./_iterators");t.exports=e("./_core").getIteratorMethod=function(e){if(e!=undefined)return e[n]||e["@@iterator"]||o[i(e)]}},{"./_classof":19,"./_core":21,"./_iterators":46,"./_wks":81}],83:[function(e,t,r){var i=e("./_an-object"),n=e("./core.get-iterator-method");t.exports=e("./_core").getIterator=function(e){var t=n(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return i(t.call(e))}},{"./_an-object":17,"./_core":21,"./core.get-iterator-method":82}],84:[function(e,t,r){"use strict";var i=e("./_ctx"),n=e("./_export"),o=e("./_to-object"),s=e("./_iter-call"),a=e("./_is-array-iter"),l=e("./_to-length"),c=e("./_create-property"),u=e("./core.get-iterator-method");n(n.S+n.F*!e("./_iter-detect")(function(e){Array.from(e)}),"Array",{from:function from(e){var t,r,n,f,h=o(e),d="function"==typeof this?this:Array,_=arguments.length,g=_>1?arguments[1]:undefined,p=g!==undefined,y=0,m=u(h);p&&(g=i(g,_>2?arguments[2]:undefined,2));if(m==undefined||d==Array&&a(m))for(r=new d(t=l(h.length));t>y;y++)c(r,y,p?g(h[y],y):h[y]);else for(f=m.call(h),r=new d;!(n=f.next()).done;y++)c(r,y,p?s(f,g,[n.value,y],!0):n.value);r.length=y;return r}})},{"./_create-property":22,"./_ctx":23,"./_export":28,"./_is-array-iter":38,"./_iter-call":41,"./_iter-detect":44,"./_to-length":77,"./_to-object":78,"./core.get-iterator-method":82}],85:[function(e,t,r){"use strict";var i=e("./_add-to-unscopables"),n=e("./_iter-step"),o=e("./_iterators"),s=e("./_to-iobject");t.exports=e("./_iter-define")(Array,"Array",function(e,t){this._t=s(e);this._i=0;this._k=t},function(){var e=this._t,t=this._k,r=this._i++;if(!e||r>=e.length){this._t=undefined;return n(1)}return n(0,"keys"==t?r:"values"==t?e[r]:[r,e[r]])},"values");o.Arguments=o.Array;i("keys");i("values");i("entries")},{"./_add-to-unscopables":15,"./_iter-define":43,"./_iter-step":45,"./_iterators":46,"./_to-iobject":76}],86:[function(e,t,r){var i=e("./_export");i(i.S,"Math",{clz32:function clz32(e){return(e>>>=0)?31-Math.floor(Math.log(e+.5)*Math.LOG2E):32}})},{"./_export":28}],87:[function(e,t,r){var i=e("./_export");i(i.S,"Math",{fround:e("./_math-fround")})},{"./_export":28,"./_math-fround":48}],88:[function(e,t,r){var i=e("./_export"),n=Math.imul;i(i.S+i.F*e("./_fails")(function(){return-5!=n(4294967295,5)||2!=n.length}),"Math",{imul:function imul(e,t){var r=+e,i=+t,n=65535&r,o=65535&i;return 0|n*o+((65535&r>>>16)*o+n*(65535&i>>>16)<<16>>>0)}})},{"./_export":28,"./_fails":29}],89:[function(e,t,r){var i=e("./_export");i(i.S,"Math",{trunc:function trunc(e){return(e>0?Math.floor:Math.ceil)(e)}})},{"./_export":28}],90:[function(e,t,r){var i=e("./_export");i(i.S,"Number",{isInteger:e("./_is-integer")})},{"./_export":28,"./_is-integer":39}],91:[function(e,t,r){var i=e("./_export");i(i.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},{"./_export":28}],92:[function(e,t,r){var i=e("./_is-object"),n=e("./_meta").onFreeze;e("./_object-sap")("freeze",function(e){return function freeze(t){return e&&i(t)?e(n(t)):t}})},{"./_is-object":40,"./_meta":50,"./_object-sap":60}],93:[function(e,t,r){var i=e("./_to-object"),n=e("./_object-keys");e("./_object-sap")("keys",function(){return function keys(e){return n(i(e))}})},{"./_object-keys":58,"./_object-sap":60,"./_to-object":78}],94:[function(e,t,r){},{}],95:[function(e,t,r){"use strict";var i,n,o,s,a=e("./_library"),l=e("./_global"),c=e("./_ctx"),u=e("./_classof"),f=e("./_export"),h=e("./_is-object"),d=e("./_a-function"),_=e("./_an-instance"),g=e("./_for-of"),p=e("./_species-constructor"),y=e("./_task").set,m=e("./_microtask")(),b=e("./_new-promise-capability"),w=e("./_perform"),v=e("./_promise-resolve"),S=l.TypeError,A=l.process,P=l.Promise,E="process"==u(A),U=function(){},k=n=b.f,I=!!function(){try{var t=P.resolve(1),r=(t.constructor={})[e("./_wks")("species")]=function(e){e(U,U)};return(E||"function"==typeof PromiseRejectionEvent)&&t.then(U)instanceof r}catch(i){}}(),N=function(e){var t;return!(!h(e)||"function"!=typeof(t=e.then))&&t},L=function(e,t){if(!e._n){e._n=!0;var r=e._c;m(function(){for(var i=e._v,n=1==e._s,o=0,s=function(t){var r,o,s,a=n?t.ok:t.fail,l=t.resolve,c=t.reject,u=t.domain;try{if(a){if(!n){2==e._h&&B(e);e._h=1}if(!0===a)r=i;else{u&&u.enter();r=a(i);if(u){u.exit();s=!0}}r===t.promise?c(S("Promise-chain cycle")):(o=N(r))?o.call(r,l,c):l(r)}else c(i)}catch(f){u&&!s&&u.exit();c(f)}};r.length>o;)s(r[o++]);e._c=[];e._n=!1;t&&!e._h&&M(e)})}},M=function(e){y.call(l,function(){var t,r,i,n=e._v,o=T(e);if(o){t=w(function(){E?A.emit("unhandledRejection",n,e):(r=l.onunhandledrejection)?r({promise:e,reason:n}):(i=l.console)&&i.error&&i.error("Unhandled promise rejection",n)});e._h=E||T(e)?2:1}e._a=undefined;if(o&&t.e)throw t.v})},T=function(e){return 1!==e._h&&0===(e._a||e._c).length},B=function(e){y.call(l,function(){var t;E?A.emit("rejectionHandled",e):(t=l.onrejectionhandled)&&t({promise:e,reason:e._v})})},C=function(e){var t=this;if(!t._d){t._d=!0;(t=t._w||t)._v=e;t._s=2;t._a||(t._a=t._c.slice());L(t,!0)}},O=function(e){var t,r=this;if(!r._d){r._d=!0;r=r._w||r;try{if(r===e)throw S("Promise can't be resolved itself");if(t=N(e))m(function(){var i={_w:r,_d:!1};try{t.call(e,c(O,i,1),c(C,i,1))}catch(n){C.call(i,n)}});else{r._v=e;r._s=1;L(r,!1)}}catch(i){C.call({_w:r,_d:!1},i)}}};if(!I){P=function Promise(e){_(this,P,"Promise","_h");d(e);i.call(this);try{e(c(O,this,1),c(C,this,1))}catch(t){C.call(this,t)}};(i=function Promise(e){this._c=[];this._a=undefined;this._s=0;this._d=!1;this._v=undefined;this._h=0;this._n=!1}).prototype=e("./_redefine-all")(P.prototype,{then:function then(e,t){var r=k(p(this,P));r.ok="function"!=typeof e||e;r.fail="function"==typeof t&&t;r.domain=E?A.domain:undefined;this._c.push(r);this._a&&this._a.push(r);this._s&&L(this,!1);return r.promise},"catch":function(e){return this.then(undefined,e)}});o=function(){var e=new i;this.promise=e;this.resolve=c(O,e,1);this.reject=c(C,e,1)};b.f=k=function(e){return e===P||e===s?new o(e):n(e)}}f(f.G+f.W+f.F*!I,{Promise:P});e("./_set-to-string-tag")(P,"Promise");e("./_set-species")("Promise");s=e("./_core").Promise;f(f.S+f.F*!I,"Promise",{reject:function reject(e){var t=k(this);(0,t.reject)(e);return t.promise}});f(f.S+f.F*(a||!I),"Promise",{resolve:function resolve(e){return v(a&&this===s?P:this,e)}});f(f.S+f.F*!(I&&e("./_iter-detect")(function(e){P.all(e)["catch"](U)})),"Promise",{all:function all(e){var t=this,r=k(t),i=r.resolve,n=r.reject,o=w(function(){var r=[],o=0,s=1;g(e,!1,function(e){var a=o++,l=!1;r.push(undefined);s++;t.resolve(e).then(function(e){if(!l){l=!0;r[a]=e;--s||i(r)}},n)});--s||i(r)});o.e&&n(o.v);return r.promise},race:function race(e){var t=this,r=k(t),i=r.reject,n=w(function(){g(e,!1,function(e){t.resolve(e).then(r.resolve,i)})});n.e&&i(n.v);return r.promise}})},{"./_a-function":14,"./_an-instance":16,"./_classof":19,"./_core":21,"./_ctx":23,"./_export":28,"./_for-of":30,"./_global":31,"./_is-object":40,"./_iter-detect":44,"./_library":47,"./_microtask":51,"./_new-promise-capability":52,"./_perform":62,"./_promise-resolve":63,"./_redefine-all":65,"./_set-species":67,"./_set-to-string-tag":68,"./_species-constructor":71,"./_task":73,"./_wks":81}],96:[function(e,t,r){"use strict";var i=e("./_string-at")(!0);e("./_iter-define")(String,"String",function(e){this._t=String(e);this._i=0},function(){var e,t=this._t,r=this._i;if(r>=t.length)return{value:undefined,done:!0};e=i(t,r);this._i+=e.length;return{value:e,done:!1}})},{"./_iter-define":43,"./_string-at":72}],97:[function(e,t,r){var i=e("./_export"),n=e("./_object-to-array")(!1);i(i.S,"Object",{values:function values(e){return n(e)}})},{"./_export":28,"./_object-to-array":61}],98:[function(e,t,r){"use strict";var i=e("./_export"),n=e("./_core"),o=e("./_global"),s=e("./_species-constructor"),a=e("./_promise-resolve");i(i.P+i.R,"Promise",{"finally":function(e){var t=s(this,n.Promise||o.Promise),r="function"==typeof e;return this.then(r?function(r){return a(t,e()).then(function(){return r})}:e,r?function(r){return a(t,e()).then(function(){throw r})}:e)}})},{"./_core":21,"./_export":28,"./_global":31,"./_promise-resolve":63,"./_species-constructor":71}],99:[function(e,t,r){"use strict";var i=e("./_export"),n=e("./_new-promise-capability"),o=e("./_perform");i(i.S,"Promise",{"try":function(e){var t=n.f(this),r=o(e);(r.e?t.reject:t.resolve)(r.v);return t.promise}})},{"./_export":28,"./_new-promise-capability":52,"./_perform":62}],100:[function(e,t,r){e("./es6.array.iterator");for(var i=e("./_global"),n=e("./_hide"),o=e("./_iterators"),s=e("./_wks")("toStringTag"),a="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),l=0;l<a.length;l++){var c=a[l],u=i[c],f=u&&u.prototype;f&&!f[s]&&n(f,s,c);o[c]=o.Array}},{"./_global":31,"./_hide":33,"./_iterators":46,"./_wks":81,"./es6.array.iterator":85}],101:[function(e,t,r){var i=function(){return this}()||Function("return this")(),n=i.regeneratorRuntime&&Object.getOwnPropertyNames(i).indexOf("regeneratorRuntime")>=0,o=n&&i.regeneratorRuntime;i.regeneratorRuntime=undefined;t.exports=e("./runtime");if(n)i.regeneratorRuntime=o;else try{delete i.regeneratorRuntime}catch(s){i.regeneratorRuntime=undefined}},{"./runtime":102}],102:[function(e,t,r){!function(e){"use strict";var r,i=Object.prototype,n=i.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag",c="object"==typeof t,u=e.regeneratorRuntime;if(u)c&&(t.exports=u);else{(u=e.regeneratorRuntime=c?t.exports:{}).wrap=wrap;var f="suspendedStart",h="suspendedYield",d="executing",_="completed",g={},p={};p[s]=function(){return this};var y=Object.getPrototypeOf,m=y&&y(y(values([])));m&&m!==i&&n.call(m,s)&&(p=m);var b=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);GeneratorFunction.prototype=b.constructor=GeneratorFunctionPrototype;GeneratorFunctionPrototype.constructor=GeneratorFunction;GeneratorFunctionPrototype[l]=GeneratorFunction.displayName="GeneratorFunction";u.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===GeneratorFunction||"GeneratorFunction"===(t.displayName||t.name))};u.mark=function(e){if(Object.setPrototypeOf)Object.setPrototypeOf(e,GeneratorFunctionPrototype);else{e.__proto__=GeneratorFunctionPrototype;l in e||(e[l]="GeneratorFunction")}e.prototype=Object.create(b);return e};u.awrap=function(e){return{__await:e}};defineIteratorMethods(AsyncIterator.prototype);AsyncIterator.prototype[a]=function(){return this};u.AsyncIterator=AsyncIterator;u.async=function(e,t,r,i){var n=new AsyncIterator(wrap(e,t,r,i));return u.isGeneratorFunction(t)?n:n.next().then(function(e){return e.done?e.value:n.next()})};defineIteratorMethods(b);b[l]="Generator";b[s]=function(){return this};b.toString=function(){return"[object Generator]"};u.keys=function(e){var t=[];for(var r in e)t.push(r);t.reverse();return function next(){for(;t.length;){var r=t.pop();if(r in e){next.value=r;next.done=!1;return next}}next.done=!0;return next}};u.values=values;Context.prototype={constructor:Context,reset:function(e){this.prev=0;this.next=0;this.sent=this._sent=r;this.done=!1;this.delegate=null;this.method="next";this.arg=r;this.tryEntries.forEach(resetTryEntry);if(!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=r)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function handle(i,n){s.type="throw";s.arg=e;t.next=i;if(n){t.method="next";t.arg=r}return!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],s=o.completion;if("root"===o.tryLoc)return handle("end");if(o.tryLoc<=this.prev){var a=n.call(o,"catchLoc"),l=n.call(o,"finallyLoc");if(a&&l){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0);if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var s=o?o.completion:{};s.type=e;s.arg=t;if(o){this.method="next";this.next=o.finallyLoc;return g}return this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;if("break"===e.type||"continue"===e.type)this.next=e.arg;else if("return"===e.type){this.rval=this.arg=e.arg;this.method="return";this.next="end"}else"normal"===e.type&&t&&(this.next=t);return g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e){this.complete(r.completion,r.afterLoc);resetTryEntry(r);return g}}},"catch":function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var i=r.completion;if("throw"===i.type){var n=i.arg;resetTryEntry(r)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,i){this.delegate={iterator:values(e),resultName:t,nextLoc:i};"next"===this.method&&(this.arg=r);return g}}}function wrap(e,t,r,i){var n=t&&t.prototype instanceof Generator?t:Generator,o=Object.create(n.prototype),s=new Context(i||[]);o._invoke=function makeInvokeMethod(e,t,r){var i=f;return function invoke(n,o){if(i===d)throw new Error("Generator is already running");if(i===_){if("throw"===n)throw o;return doneResult()}r.method=n;r.arg=o;for(;;){var s=r.delegate;if(s){var a=maybeInvokeDelegate(s,r);if(a){if(a===g)continue;return a}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===f){i=_;throw r.arg}r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=d;var l=tryCatch(e,t,r);if("normal"===l.type){i=r.done?_:h;if(l.arg===g)continue;return{value:l.arg,done:r.done}}if("throw"===l.type){i=_;r.method="throw";r.arg=l.arg}}}}(e,r,s);return o}function tryCatch(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(i){return{type:"throw",arg:i}}}function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}function defineIteratorMethods(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function AsyncIterator(e){var t;this._invoke=function enqueue(r,i){function callInvokeWithMethodAndArg(){return new Promise(function(t,o){!function invoke(t,r,i,o){var s=tryCatch(e[t],e,r);if("throw"!==s.type){var a=s.arg,l=a.value;return l&&"object"==typeof l&&n.call(l,"__await")?Promise.resolve(l.__await).then(function(e){invoke("next",e,i,o)},function(e){invoke("throw",e,i,o)}):Promise.resolve(l).then(function(e){a.value=e;i(a)},o)}o(s.arg)}(r,i,t,o)})}return t=t?t.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}}function maybeInvokeDelegate(e,t){var i=e.iterator[t.method];if(i===r){t.delegate=null;if("throw"===t.method){if(e.iterator["return"]){t.method="return";t.arg=r;maybeInvokeDelegate(e,t);if("throw"===t.method)return g}t.method="throw";t.arg=new TypeError("The iterator does not provide a 'throw' method")}return g}var n=tryCatch(i,e.iterator,t.arg);if("throw"===n.type){t.method="throw";t.arg=n.arg;t.delegate=null;return g}var o=n.arg;if(!o){t.method="throw";t.arg=new TypeError("iterator result is not an object");t.delegate=null;return g}if(!o.done)return o;t[e.resultName]=o.value;t.next=e.nextLoc;if("return"!==t.method){t.method="next";t.arg=r}t.delegate=null;return g}function pushTryEntry(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]);if(2 in e){t.finallyLoc=e[2];t.afterLoc=e[3]}this.tryEntries.push(t)}function resetTryEntry(e){var t=e.completion||{};t.type="normal";delete t.arg;e.completion=t}function Context(e){this.tryEntries=[{tryLoc:"root"}];e.forEach(pushTryEntry,this);this.reset(!0)}function values(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function next(){for(;++i<e.length;)if(n.call(e,i)){next.value=e[i];next.done=!1;return next}next.value=r;next.done=!0;return next};return o.next=o}}return{next:doneResult}}function doneResult(){return{value:r,done:!0}}}(function(){return this}()||Function("return this")())},{}],"babel-runtime/core-js/array/from":[function(e,t,r){t.exports={"default":e("core-js/library/fn/array/from"),__esModule:!0}},{"core-js/library/fn/array/from":1}],"babel-runtime/core-js/get-iterator":[function(e,t,r){t.exports={"default":e("core-js/library/fn/get-iterator"),__esModule:!0}},{"core-js/library/fn/get-iterator":2}],"babel-runtime/core-js/json/stringify":[function(e,t,r){t.exports={"default":e("core-js/library/fn/json/stringify"),__esModule:!0}},{"core-js/library/fn/json/stringify":3}],"babel-runtime/core-js/math/clz32":[function(e,t,r){t.exports={"default":e("core-js/library/fn/math/clz32"),__esModule:!0}},{"core-js/library/fn/math/clz32":4}],"babel-runtime/core-js/math/fround":[function(e,t,r){t.exports={"default":e("core-js/library/fn/math/fround"),__esModule:!0}},{"core-js/library/fn/math/fround":5}],"babel-runtime/core-js/math/imul":[function(e,t,r){t.exports={"default":e("core-js/library/fn/math/imul"),__esModule:!0}},{"core-js/library/fn/math/imul":6}],"babel-runtime/core-js/math/trunc":[function(e,t,r){t.exports={"default":e("core-js/library/fn/math/trunc"),__esModule:!0}},{"core-js/library/fn/math/trunc":7}],"babel-runtime/core-js/number/is-integer":[function(e,t,r){t.exports={"default":e("core-js/library/fn/number/is-integer"),__esModule:!0}},{"core-js/library/fn/number/is-integer":8}],"babel-runtime/core-js/number/max-safe-integer":[function(e,t,r){t.exports={"default":e("core-js/library/fn/number/max-safe-integer"),__esModule:!0}},{"core-js/library/fn/number/max-safe-integer":9}],"babel-runtime/core-js/object/freeze":[function(e,t,r){t.exports={"default":e("core-js/library/fn/object/freeze"),__esModule:!0}},{"core-js/library/fn/object/freeze":10}],"babel-runtime/core-js/object/keys":[function(e,t,r){t.exports={"default":e("core-js/library/fn/object/keys"),__esModule:!0}},{"core-js/library/fn/object/keys":11}],"babel-runtime/core-js/object/values":[function(e,t,r){t.exports={"default":e("core-js/library/fn/object/values"),__esModule:!0}},{"core-js/library/fn/object/values":12}],"babel-runtime/core-js/promise":[function(e,t,r){t.exports={"default":e("core-js/library/fn/promise"),__esModule:!0}},{"core-js/library/fn/promise":13}],"babel-runtime/helpers/asyncToGenerator":[function(e,t,r){"use strict";r.__esModule=!0;var i=function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}(e("../core-js/promise"));r["default"]=function(e){return function(){var t=e.apply(this,arguments);return new i["default"](function(e,r){return function step(n,o){try{var s=t[n](o),a=s.value}catch(l){r(l);return}if(!s.done)return i["default"].resolve(a).then(function(e){step("next",e)},function(e){step("throw",e)});e(a)}("next")})}}},{"../core-js/promise":"babel-runtime/core-js/promise"}],"babel-runtime/regenerator":[function(e,t,r){t.exports=e("regenerator-runtime")},{"regenerator-runtime":101}]},{},[]);var Proxy,_asyncToGenerator2=require("babel-runtime/helpers/asyncToGenerator"),_asyncToGenerator3=_interopRequireDefault(_asyncToGenerator2);function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}if("undefined"==typeof Nimiq)var Nimiq="undefined"!=typeof window?window:{};!function(e){(Nimiq=e="undefined"!=typeof e?e:{})._currentScript||(Nimiq._currentScript=document.currentScript);if(!Nimiq._currentScript){const e=document.getElementsByTagName("script");Nimiq._currentScript=e[e.length-1]}Nimiq._path||(Nimiq._currentScript&&-1!==Nimiq._currentScript.src.indexOf("/")?Nimiq._path=Nimiq._currentScript.src.substring(0,Nimiq._currentScript.src.lastIndexOf("/")+1):Nimiq._path="./");class Class{static get scope(){return"undefined"!=typeof e?e:"undefined"!=typeof self?self:window}static register(t){"undefined"!=typeof e&&(e[t.name]=t)}}Class.register(Class);class LogNative{constructor(){this._global_level=Log.INFO;this._tag_levels={};try{if(window.localStorage)try{let t=window.localStorage.getItem("log_tag_levels");t&&"string"==typeof t&&(t=JSON.parse(t));t&&"object"==typeof t&&(this._tag_levels=t)}catch(e){console.warn("Failed to load log configuration from local storage.")}}catch(e){}}isLoggable(e,t){return e&&this._tag_levels[e]?this._tag_levels[e]<=t:this._tag_levels["*"]?this._tag_levels["*"]<=t:this._global_level<=t}setLoggable(e,t){e&&e.name&&(e=e.name);this._tag_levels[e]=t;window.localStorage&&window.localStorage.setItem("log_tag_levels",JSON.stringify(this._tag_levels))}msg(e,t,r){t&&t.name&&(t=t.name);if(this.isLoggable(t,e)){t&&r.unshift(t+":");r.unshift(`[${Log.Level.toStringTag(e)} ${(new Date).toTimeString().substr(0,8)}]`);console.error&&e>=Log.ERROR?console.error.apply(console,r):console.warn&&e>=Log.WARNING?console.warn.apply(console,r):console.info&&e>=Log.INFO?console.info.apply(console,r):console.debug&&e>=Log.DEBUG?console.debug.apply(console,r):console.trace&&e<=Log.TRACE?console.trace.apply(console,r):console.log.apply(console,r)}}}Class.register(LogNative);class Log{static get instance(){Log._instance||(Log._instance=new Log(new LogNative));return Log._instance}constructor(e){this._native=e}setLoggable(e,t){this._native.setLoggable(e,Log.Level.get(t))}get level(){return this._native._global_level}set level(e){this._native._global_level=Log.Level.get(e)}msg(e,t,r){if(this._native.isLoggable(t,e)){for(let e=0;e<r.length;++e){"function"==typeof r[e]&&(r[e]=r[e]());"object"==typeof r[e]&&("function"==typeof r[e].toString?r[e]=r[e].toString():r[e].constructor&&r[e].constructor.name?r[e]=`{Object: ${r[e].constructor.name}}`:r[e]="{Object}")}this._native.msg(e,t,r)}}static d(e,t,...r){if(arguments.length>=2){e=arguments[0];r=Array.prototype.slice.call(arguments,1)}else{e=undefined;r=Array.prototype.slice.call(arguments,0)}Log.instance.msg(Log.DEBUG,e,r)}static e(e,t,...r){if(arguments.length>=2){e=arguments[0];r=Array.prototype.slice.call(arguments,1)}else{e=undefined;r=Array.prototype.slice.call(arguments,0)}Log.instance.msg(Log.ERROR,e,r)}static i(e,t,...r){if(arguments.length>=2){e=arguments[0];r=Array.prototype.slice.call(arguments,1)}else{e=undefined;r=Array.prototype.slice.call(arguments,0)}Log.instance.msg(Log.INFO,e,r)}static v(e,t,...r){if(arguments.length>=2){e=arguments[0];r=Array.prototype.slice.call(arguments,1)}else{e=undefined;r=Array.prototype.slice.call(arguments,0)}Log.instance.msg(Log.VERBOSE,e,r)}static w(e,t,...r){if(arguments.length>=2){e=arguments[0];r=Array.prototype.slice.call(arguments,1)}else{e=undefined;r=Array.prototype.slice.call(arguments,0)}Log.instance.msg(Log.WARNING,e,r)}static t(e,t,...r){if(arguments.length>=2){e=arguments[0];r=Array.prototype.slice.call(arguments,1)}else{e=undefined;r=Array.prototype.slice.call(arguments,0)}Log.instance.msg(Log.TRACE,e,r)}}Log.Level={TRACE:1,VERBOSE:2,DEBUG:3,INFO:4,WARNING:5,ERROR:6,ASSERT:7,toStringTag:function(e){switch(e){case Log.Level.TRACE:return"T";case Log.Level.VERBOSE:return"V";case Log.Level.DEBUG:return"D";case Log.Level.INFO:return"I";case Log.Level.WARNING:return"W";case Log.Level.ERROR:return"E";case Log.Level.ASSERT:return"A";default:return"*"}},toString:function(e){switch(e){case Log.Level.TRACE:return"trace";case Log.Level.VERBOSE:return"verbose";case Log.Level.DEBUG:return"debug";case Log.Level.INFO:return"info";case Log.Level.WARNING:return"warn";case Log.Level.ERROR:return"error";case Log.Level.ASSERT:return"assert";default:return"unknown"}},get:function(e){if("number"==typeof e)return e;if(!isNaN(parseInt(e)))return parseInt(e);switch(e.toLowerCase()){case"t":case"trace":return Log.Level.TRACE;case"v":case"verbose":return Log.Level.VERBOSE;case"d":case"debug":return Log.Level.DEBUG;case"i":case"info":return Log.Level.INFO;case"w":case"warn":case"warning":return Log.Level.WARNING;case"e":case"error":case"exception":return Log.Level.ERROR;case"a":case"assert":case"assertion":return Log.Level.ASSERT}return 0}};Log.TRACE=Log.Level.TRACE;Log.VERBOSE=Log.Level.VERBOSE;Log.DEBUG=Log.Level.DEBUG;Log.INFO=Log.Level.INFO;Log.WARNING=Log.Level.WARNING;Log.ERROR=Log.Level.ERROR;Log.ASSERT=Log.Level.ASSERT;Log._instance=null;Log.d.tag=(e=>Log.d.bind(null,e));Log.e.tag=(e=>Log.e.bind(null,e));Log.i.tag=(e=>Log.i.bind(null,e));Log.v.tag=(e=>Log.v.bind(null,e));Log.w.tag=(e=>Log.w.bind(null,e));Log.t.tag=(e=>Log.t.bind(null,e));Class.register(Log);class Observable{static get WILDCARD(){return"*"}constructor(){this._listeners=new Map}_offAll(){this._listeners.clear()}on(e,t){if(this._listeners.has(e))return this._listeners.get(e).push(t)-1;this._listeners.set(e,[t]);return 0}off(e,t){this._listeners.has(e)&&this._listeners.get(e)[t]&&delete this._listeners.get(e)[t]}fire(e,...t){const r=[];if(this._listeners.has(e)){const i=this._listeners.get(e);for(const e in i){if(isNaN(e))continue;const n=i[e].apply(null,t);n instanceof Promise&&r.push(n)}}if(this._listeners.has(Observable.WILDCARD)){const e=this._listeners.get(Observable.WILDCARD);for(const t in e){if(isNaN(t))continue;const i=e[t].apply(null,arguments);i instanceof Promise&&r.push(i)}}return r.length>0?Promise.all(r):null}bubble(e,...t){for(const r of t){let t;t=r===Observable.WILDCARD?function(){this.fire.apply(this,arguments)}:function(){this.fire.apply(this,[r,...arguments])};e.on(r,t.bind(this))}}}Class.register(Observable);class CryptoLib{static get instance(){if(!CryptoLib._instance){const e={};e.getRandomValues=(window.crypto||window.msCrypto).getRandomValues.bind(window.crypto);CryptoLib._instance=e}return CryptoLib._instance}}CryptoLib._instance=null;Class.register(CryptoLib);class ArrayUtils{static randomElement(e){return e[Math.floor(Math.random()*e.length)]}static subarray(e,t,r){function clamp(e,t,r){return e<t?t:e>r?r:e}t===undefined&&(t=0);r===undefined&&(r=e.byteLength);t=clamp(t,0,e.byteLength);let i=(r=clamp(r,0,e.byteLength))-t;i<0&&(i=0);return new Uint8Array(e.buffer,e.byteOffset+t,i)}static*k_combinations(e,t){const r=e.length;if(t>r)return;const i=Array.from(new Array(t),(e,t)=>t);yield i.map(t=>e[t]);const n=Array.from(new Array(t),(e,r)=>t-r-1);for(;;){let o=t-1,s=!1;for(o of n)if(i[o]!==o+r-t){s=!0;break}if(!s)return;i[o]+=1;for(const e of Array.from(new Array(t-o-1),(e,t)=>o+t+1))i[e]=i[e-1]+1;yield i.map(t=>e[t])}}}Class.register(ArrayUtils);class Assert{static that(e,t="Assertion failed"){if(!e)throw new Error(t)}}Class.register(Assert);class BufferUtils{static toAscii(e){return String.fromCharCode.apply(null,new Uint8Array(e))}static fromAscii(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;++r)t[r]=e.charCodeAt(r);return t}static _codePointTextDecoder(e){if("undefined"==typeof TextDecoder)throw new Error("TextDecoder not supported");if(null===BufferUtils._ISO_8859_15_DECODER)throw new Error("TextDecoder does not supprot iso-8859-15");if(BufferUtils._ISO_8859_15_DECODER===undefined)try{BufferUtils._ISO_8859_15_DECODER=new TextDecoder("iso-8859-15")}finally{BufferUtils._ISO_8859_15_DECODER=null}return BufferUtils._ISO_8859_15_DECODER.decode(e).replace("€","¤").replace("Š","¦").replace("š","¨").replace("Ž","´").replace("ž","¸").replace("Œ","¼").replace("œ","½").replace("Ÿ","¾")}static _tripletToBase64(e){return BufferUtils._BASE64_LOOKUP[e>>18&63]+BufferUtils._BASE64_LOOKUP[e>>12&63]+BufferUtils._BASE64_LOOKUP[e>>6&63]+BufferUtils._BASE64_LOOKUP[63&e]}static _base64encodeChunk(e,t,r){let i;const n=[];for(let o=t;o<r;o+=3){i=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]);n.push(BufferUtils._tripletToBase64(i))}return n.join("")}static _base64fromByteArray(e){let t;const r=e.length,i=r%3;let n="";const o=[];for(let s=0,a=r-i;s<a;s+=16383)o.push(BufferUtils._base64encodeChunk(e,s,s+16383>a?a:s+16383));if(1===i){t=e[r-1];n+=BufferUtils._BASE64_LOOKUP[t>>2];n+=BufferUtils._BASE64_LOOKUP[t<<4&63];n+="=="}else if(2===i){t=(e[r-2]<<8)+e[r-1];n+=BufferUtils._BASE64_LOOKUP[t>>10];n+=BufferUtils._BASE64_LOOKUP[t>>4&63];n+=BufferUtils._BASE64_LOOKUP[t<<2&63];n+="="}o.push(n);return o.join("")}static toBase64(e){if(PlatformUtils.isNodeJs())return Buffer.from(e).toString("base64");if("undefined"!=typeof TextDecoder&&null!==BufferUtils._ISO_8859_15_DECODER)try{return btoa(BufferUtils._codePointTextDecoder(new Uint8Array(e)))}catch(t){}return BufferUtils._base64fromByteArray(new Uint8Array(e))}static fromBase64(e){return new SerialBuffer(Uint8Array.from(atob(e),e=>e.charCodeAt(0)))}static toBase64Url(e){return BufferUtils.toBase64(e).replace(/\//g,"_").replace(/\+/g,"-").replace(/=/g,".")}static fromBase64Url(e){return new SerialBuffer(Uint8Array.from(atob(e.replace(/_/g,"/").replace(/-/g,"+").replace(/\./g,"=")),e=>e.charCodeAt(0)))}static toBase32(e,t=BufferUtils.BASE32_ALPHABET.NIMIQ){let r,i,n,o=3,s=0,a="";for(n=0;n<e.length;n++){a+=t[31&(i=s|(r=e[n])>>o)];o>5&&(a+=t[31&(i=r>>(o-=5))]);s=r<<(o=5-o);o=8-o}3!==o&&(a+=t[31&s]);for(;a.length%8!=0&&33===t.length;)a+=t[32];return a}static fromBase32(e,t=BufferUtils.BASE32_ALPHABET.NIMIQ){const r=[];t.toUpperCase().split("").forEach((e,t)=>{e in r||(r[e]=t)});let i,n=8,o=0,s=[];e.toUpperCase().split("").forEach(e=>{if(33!==t.length||e!==t[32]){i=255&r[e];if((n-=5)>0)o|=i<<n;else if(n<0){s.push(o|i>>-n);o=i<<(n+=8)&255}else{s.push(o|i);n=8;o=0}}});8!==n&&0!==o&&s.push(o);return new Uint8Array(s)}static toHex(e){let t="";for(let r=0;r<e.length;r++){const i=e[r];t+=BufferUtils.HEX_ALPHABET[i>>>4];t+=BufferUtils.HEX_ALPHABET[15&i]}return t}static fromHex(e){e=e.trim();return StringUtils.isHexBytes(e)?new SerialBuffer(Uint8Array.from(e.match(/.{2}/g)||[],e=>parseInt(e,16))):null}static concatTypedArrays(e,t){const r=new e.constructor(e.length+t.length);r.set(e,0);r.set(t,e.length);return r}static equals(e,t){if(e.length!==t.length)return!1;const r=new Uint8Array(e),i=new Uint8Array(t);for(let n=0;n<e.length;n++)if(r[n]!==i[n])return!1;return!0}static compare(e,t){if(e.length<t.length)return-1;if(e.length>t.length)return 1;for(let r=0;r<e.length;r++){if(e[r]<t[r])return-1;if(e[r]>t[r])return 1}return 0}static xor(e,t){const r=new Uint8Array(e.byteLength);for(let i=0;i<e.byteLength;++i)r[i]=e[i]^t[i];return r}}BufferUtils.BASE64_ALPHABET="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";BufferUtils.BASE32_ALPHABET={RFC4648:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",RFC4648_HEX:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",NIMIQ:"0123456789ABCDEFGHJKLMNPQRSTUVXY"};BufferUtils.HEX_ALPHABET="0123456789abcdef";BufferUtils._BASE64_LOOKUP=[];for(let t=0,r=BufferUtils.BASE64_ALPHABET.length;t<r;++t)BufferUtils._BASE64_LOOKUP[t]=BufferUtils.BASE64_ALPHABET[t];Class.register(BufferUtils);class SerialBuffer extends Uint8Array{constructor(e){super(e);this._view=new DataView(this.buffer);this._readPos=0;this._writePos=0}subarray(e,t){return ArrayUtils.subarray(this,e,t)}get readPos(){return this._readPos}set readPos(e){if(e<0||e>this.byteLength)throw`Invalid readPos ${e}`;this._readPos=e}get writePos(){return this._writePos}set writePos(e){if(e<0||e>this.byteLength)throw`Invalid writePos ${e}`;this._writePos=e}reset(){this._readPos=0;this._writePos=0}read(e){const t=this.subarray(this._readPos,this._readPos+e);this._readPos+=e;return new Uint8Array(t)}write(e){this.set(e,this._writePos);this._writePos+=e.byteLength}readUint8(){return this._view.getUint8(this._readPos++)}writeUint8(e){this._view.setUint8(this._writePos++,e)}readUint16(){const e=this._view.getUint16(this._readPos);this._readPos+=2;return e}writeUint16(e){this._view.setUint16(this._writePos,e);this._writePos+=2}readUint32(){const e=this._view.getUint32(this._readPos);this._readPos+=4;return e}writeUint32(e){this._view.setUint32(this._writePos,e);this._writePos+=4}readUint64(){const e=this._view.getUint32(this._readPos)*Math.pow(2,32)+this._view.getUint32(this._readPos+4);if(!NumberUtils.isUint64(e))throw new Error("Malformed value");this._readPos+=8;return e}writeUint64(e){if(!NumberUtils.isUint64(e))throw new Error("Malformed value");this._view.setUint32(this._writePos,Math.floor(e/Math.pow(2,32)));this._view.setUint32(this._writePos+4,e);this._writePos+=8}readVarUint(){const e=this.readUint8();return e<253?e:253===e?this.readUint16():254===e?this.readUint32():this.readUint64()}writeVarUint(e){if(!NumberUtils.isUint64(e))throw new Error("Malformed value");if(e<253)this.writeUint8(e);else if(e<=65535){this.writeUint8(253);this.writeUint16(e)}else if(e<=4294967295){this.writeUint8(254);this.writeUint32(e)}else{this.writeUint8(255);this.writeUint64(e)}}static varUintSize(e){if(!NumberUtils.isUint64(e))throw new Error("Malformed value");return e<253?1:e<=65535?3:e<=4294967295?5:9}readFloat64(){const e=this._view.getFloat64(this._readPos);this._readPos+=8;return e}writeFloat64(e){this._view.setFloat64(this._writePos,e);this._writePos+=8}readString(e){const t=this.read(e);return BufferUtils.toAscii(t)}writeString(e,t){if(StringUtils.isMultibyte(e)||e.length!==t)throw"Malformed value/length";const r=BufferUtils.fromAscii(e);this.write(r)}readPaddedString(e){const t=this.read(e);let r=0;for(;r<e&&0!==t[r];)r++;const i=new Uint8Array(t.buffer,t.byteOffset,r);return BufferUtils.toAscii(i)}writePaddedString(e,t){if(StringUtils.isMultibyte(e)||e.length>t)throw"Malformed value/length";const r=BufferUtils.fromAscii(e);this.write(r);const i=t-r.byteLength;this.write(new Uint8Array(i))}readVarLengthString(){const e=this.readUint8();if(this._readPos+e>this.length)throw"Malformed length";const t=this.read(e);return BufferUtils.toAscii(t)}writeVarLengthString(e){if(StringUtils.isMultibyte(e)||!NumberUtils.isUint8(e.length))throw new Error("Malformed value");const t=BufferUtils.fromAscii(e);this.writeUint8(t.byteLength);this.write(t)}static varLengthStringSize(e){if(StringUtils.isMultibyte(e)||!NumberUtils.isUint8(e.length))throw new Error("Malformed value");return 1+e.length}}Class.register(SerialBuffer);!function(e){"use strict";var t,r=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,i=Math.ceil,n=Math.floor,o="[BigNumber Error] ",s=o+"Number primitive has more than 15 significant digits: ",a=1e14,l=14,c=9007199254740991,u=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],f=1e7,h=1e9;function bitFloor(e){var t=0|e;return e>0||e===t?t:t-1}function coeffToString(e){for(var t,r,i=1,n=e.length,o=e[0]+"";i<n;){t=e[i++]+"";r=l-t.length;for(;r--;t="0"+t);o+=t}for(n=o.length;48===o.charCodeAt(--n););return o.slice(0,n+1||1)}function compare(e,t){var r,i,n=e.c,o=t.c,s=e.s,a=t.s,l=e.e,c=t.e;if(!s||!a)return null;r=n&&!n[0];i=o&&!o[0];if(r||i)return r?i?0:-a:s;if(s!=a)return s;r=s<0;i=l==c;if(!n||!o)return i?0:!n^r?1:-1;if(!i)return l>c^r?1:-1;a=(l=n.length)<(c=o.length)?l:c;for(s=0;s<a;s++)if(n[s]!=o[s])return n[s]>o[s]^r?1:-1;return l==c?0:l>c^r?1:-1}function intCheck(e,t,r,s){if(e<t||e>r||e!==(e<0?i(e):n(e)))throw Error(o+(s||"Argument")+("number"==typeof e?e<t||e>r?" out of range: ":" not an integer: ":" not a primitive number: ")+e)}function isArray(e){return"[object Array]"==Object.prototype.toString.call(e)}function isOdd(e){var t=e.c.length-1;return bitFloor(e.e/l)==t&&e.c[t]%2!=0}function toExponential(e,t){return(e.length>1?e.charAt(0)+"."+e.slice(1):e)+(t<0?"e":"e+")+t}function toFixedPoint(e,t,r){var i,n;if(t<0){for(n=r+".";++t;n+=r);e=n+e}else if(++t>(i=e.length)){for(n=r,t-=i;--t;n+=r);e+=n}else t<i&&(e=e.slice(0,t)+"."+e.slice(t));return e}(t=function clone(e){var t,d,_,g,p,y,m,b,w,v=BigNumber.prototype={constructor:BigNumber,toString:null,valueOf:null},S=new BigNumber(1),A=20,P=4,E=-7,U=21,k=-1e7,I=1e7,N=!1,L=1,M=0,T={decimalSeparator:".",groupSeparator:",",groupSize:3,secondaryGroupSize:0,fractionGroupSeparator:" ",fractionGroupSize:0},B="0123456789abcdefghijklmnopqrstuvwxyz";function BigNumber(e,t){var i,o,a,u,f,h,g,p=this;if(!(p instanceof BigNumber))return new BigNumber(e,t);if(null==t){if(e instanceof BigNumber){p.s=e.s;p.e=e.e;p.c=(e=e.c)?e.slice():e;return}if((f="number"==typeof e)&&0*e==0){p.s=1/e<0?(e=-e,-1):1;if(e===~~e){for(a=0,u=e;u>=10;u/=10,a++);p.e=a;p.c=[e];return}g=e+""}else{if(!r.test(g=e+""))return _(p,g,f);p.s=45==g.charCodeAt(0)?(g=g.slice(1),-1):1}}else{intCheck(t,2,B.length,"Base");g=e+"";if(10==t)return round(p=new BigNumber(e instanceof BigNumber?e:g),A+p.e+1,P);if(f="number"==typeof e){if(0*e!=0)return _(p,g,f,t);p.s=1/e<0?(g=g.slice(1),-1):1;if(BigNumber.DEBUG&&g.replace(/^0\.0*|\./,"").length>15)throw Error(s+e);f=!1}else{p.s=45===g.charCodeAt(0)?(g=g.slice(1),-1):1;t>10&&t<37&&(g=g.toLowerCase())}i=B.slice(0,t);a=u=0;for(h=g.length;u<h;u++)if(i.indexOf(o=g.charAt(u))<0){if("."==o&&u>a){a=h;continue}return _(p,e+"",f,t)}g=d(g,t,10,p.s)}(a=g.indexOf("."))>-1&&(g=g.replace(".",""));if((u=g.search(/e/i))>0){a<0&&(a=u);a+=+g.slice(u+1);g=g.substring(0,u)}else a<0&&(a=g.length);for(u=0;48===g.charCodeAt(u);u++);for(h=g.length;48===g.charCodeAt(--h););if(g=g.slice(u,++h)){h-=u;if(f&&BigNumber.DEBUG&&h>15&&(e>c||e!==n(e)))throw Error(s+p.s*e);if((a=a-u-1)>I)p.c=p.e=null;else if(a<k)p.c=[p.e=0];else{p.e=a;p.c=[];u=(a+1)%l;a<0&&(u+=l);if(u<h){u&&p.c.push(+g.slice(0,u));for(h-=l;u<h;)p.c.push(+g.slice(u,u+=l));g=g.slice(u);u=l-g.length}else u-=h;for(;u--;g+="0");p.c.push(+g)}}else p.c=[p.e=0]}BigNumber.clone=clone;BigNumber.ROUND_UP=0;BigNumber.ROUND_DOWN=1;BigNumber.ROUND_CEIL=2;BigNumber.ROUND_FLOOR=3;BigNumber.ROUND_HALF_UP=4;BigNumber.ROUND_HALF_DOWN=5;BigNumber.ROUND_HALF_EVEN=6;BigNumber.ROUND_HALF_CEIL=7;BigNumber.ROUND_HALF_FLOOR=8;BigNumber.EUCLID=9;BigNumber.config=BigNumber.set=function(e){var t,r;if(null!=e){if("object"!=typeof e)throw Error(o+"Object expected: "+e);if(e.hasOwnProperty(t="DECIMAL_PLACES")){intCheck(r=e[t],0,h,t);A=r}if(e.hasOwnProperty(t="ROUNDING_MODE")){intCheck(r=e[t],0,8,t);P=r}if(e.hasOwnProperty(t="EXPONENTIAL_AT"))if(isArray(r=e[t])){intCheck(r[0],-h,0,t);intCheck(r[1],0,h,t);E=r[0];U=r[1]}else{intCheck(r,-h,h,t);E=-(U=r<0?-r:r)}if(e.hasOwnProperty(t="RANGE"))if(isArray(r=e[t])){intCheck(r[0],-h,-1,t);intCheck(r[1],1,h,t);k=r[0];I=r[1]}else{intCheck(r,-h,h,t);if(!r)throw Error(o+t+" cannot be zero: "+r);k=-(I=r<0?-r:r)}if(e.hasOwnProperty(t="CRYPTO")){if((r=e[t])!==!!r)throw Error(o+t+" not true or false: "+r);if(r){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes){N=!r;throw Error(o+"crypto unavailable")}N=r}else N=r}if(e.hasOwnProperty(t="MODULO_MODE")){intCheck(r=e[t],0,9,t);L=r}if(e.hasOwnProperty(t="POW_PRECISION")){intCheck(r=e[t],0,h,t);M=r}if(e.hasOwnProperty(t="FORMAT")){if("object"!=typeof(r=e[t]))throw Error(o+t+" not an object: "+r);T=r}if(e.hasOwnProperty(t="ALPHABET")){if("string"!=typeof(r=e[t])||/^.$|\.|(.).*\1/.test(r))throw Error(o+t+" invalid: "+r);B=r}}return{DECIMAL_PLACES:A,ROUNDING_MODE:P,EXPONENTIAL_AT:[E,U],RANGE:[k,I],CRYPTO:N,MODULO_MODE:L,POW_PRECISION:M,FORMAT:T,ALPHABET:B}};BigNumber.isBigNumber=function(e){return e instanceof BigNumber||e&&!0===e._isBigNumber||!1};BigNumber.maximum=BigNumber.max=function(){return maxOrMin(arguments,v.lt)};BigNumber.minimum=BigNumber.min=function(){return maxOrMin(arguments,v.gt)};BigNumber.random=(g=9007199254740992*Math.random()&2097151?function(){return n(9007199254740992*Math.random())}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)},function(e){var t,r,s,a,c,f=0,d=[],_=new BigNumber(S);null==e?e=A:intCheck(e,0,h);a=i(e/l);if(N)if(crypto.getRandomValues){t=crypto.getRandomValues(new Uint32Array(a*=2));for(;f<a;)if((c=131072*t[f]+(t[f+1]>>>11))>=9e15){r=crypto.getRandomValues(new Uint32Array(2));t[f]=r[0];t[f+1]=r[1]}else{d.push(c%1e14);f+=2}f=a/2}else{if(!crypto.randomBytes){N=!1;throw Error(o+"crypto unavailable")}t=crypto.randomBytes(a*=7);for(;f<a;)if((c=281474976710656*(31&t[f])+1099511627776*t[f+1]+4294967296*t[f+2]+16777216*t[f+3]+(t[f+4]<<16)+(t[f+5]<<8)+t[f+6])>=9e15)crypto.randomBytes(7).copy(t,f);else{d.push(c%1e14);f+=7}f=a/7}if(!N)for(;f<a;)(c=g())<9e15&&(d[f++]=c%1e14);a=d[--f];e%=l;if(a&&e){c=u[l-e];d[f]=n(a/c)*c}for(;0===d[f];d.pop(),f--);if(f<0)d=[s=0];else{for(s=-1;0===d[0];d.splice(0,1),s-=l);for(f=1,c=d[0];c>=10;c/=10,f++);f<l&&(s-=l-f)}_.e=s;_.c=d;return _});d=function(){function toBaseOut(e,t,r,i){for(var n,o,s=[0],a=0,l=e.length;a<l;){for(o=s.length;o--;s[o]*=t);s[0]+=i.indexOf(e.charAt(a++));for(n=0;n<s.length;n++)if(s[n]>r-1){null==s[n+1]&&(s[n+1]=0);s[n+1]+=s[n]/r|0;s[n]%=r}}return s.reverse()}return function(e,r,i,n,o){var s,a,l,c,u,f,h,d,_=e.indexOf("."),g=A,p=P;if(_>=0){c=M;M=0;e=e.replace(".","");f=(d=new BigNumber(r)).pow(e.length-_);M=c;d.c=toBaseOut(toFixedPoint(coeffToString(f.c),f.e,"0"),10,i,"0123456789");d.e=d.c.length}l=c=(h=toBaseOut(e,r,i,o?(s=B,"0123456789"):(s="0123456789",B))).length;for(;0==h[--c];h.pop());if(!h[0])return s.charAt(0);if(_<0)--l;else{f.c=h;f.e=l;f.s=n;h=(f=t(f,d,g,p,i)).c;u=f.r;l=f.e}_=h[a=l+g+1];c=i/2;u=u||a<0||null!=h[a+1];u=p<4?(null!=_||u)&&(0==p||p==(f.s<0?3:2)):_>c||_==c&&(4==p||u||6==p&&1&h[a-1]||p==(f.s<0?8:7));if(a<1||!h[0])e=u?toFixedPoint(s.charAt(1),-g,s.charAt(0)):s.charAt(0);else{h.length=a;if(u)for(--i;++h[--a]>i;){h[a]=0;if(!a){++l;h=[1].concat(h)}}for(c=h.length;!h[--c];);for(_=0,e="";_<=c;e+=s.charAt(h[_++]));e=toFixedPoint(e,l,s.charAt(0))}return e}}();t=function(){function multiply(e,t,r){var i,n,o,s,a=0,l=e.length,c=t%f,u=t/f|0;for(e=e.slice();l--;){a=((n=c*(o=e[l]%f)+(i=u*o+(s=e[l]/f|0)*c)%f*f+a)/r|0)+(i/f|0)+u*s;e[l]=n%r}a&&(e=[a].concat(e));return e}function compare(e,t,r,i){var n,o;if(r!=i)o=r>i?1:-1;else for(n=o=0;n<r;n++)if(e[n]!=t[n]){o=e[n]>t[n]?1:-1;break}return o}function subtract(e,t,r,i){for(var n=0;r--;){e[r]-=n;n=e[r]<t[r]?1:0;e[r]=n*i+e[r]-t[r]}for(;!e[0]&&e.length>1;e.splice(0,1));}return function(e,t,r,i,o){var s,c,u,f,h,d,_,g,p,y,m,b,w,v,S,A,P,E=e.s==t.s?1:-1,U=e.c,k=t.c;if(!(U&&U[0]&&k&&k[0]))return new BigNumber(e.s&&t.s&&(U?!k||U[0]!=k[0]:k)?U&&0==U[0]||!k?0*E:E/0:NaN);p=(g=new BigNumber(E)).c=[];E=r+(c=e.e-t.e)+1;if(!o){o=a;c=bitFloor(e.e/l)-bitFloor(t.e/l);E=E/l|0}for(u=0;k[u]==(U[u]||0);u++);k[u]>(U[u]||0)&&c--;if(E<0){p.push(1);f=!0}else{v=U.length;A=k.length;u=0;E+=2;if((h=n(o/(k[0]+1)))>1){k=multiply(k,h,o);U=multiply(U,h,o);A=k.length;v=U.length}w=A;m=(y=U.slice(0,A)).length;for(;m<A;y[m++]=0);P=k.slice();P=[0].concat(P);S=k[0];k[1]>=o/2&&S++;do{h=0;if((s=compare(k,y,A,m))<0){b=y[0];A!=m&&(b=b*o+(y[1]||0));if((h=n(b/S))>1){h>=o&&(h=o-1);_=(d=multiply(k,h,o)).length;m=y.length;for(;1==compare(d,y,_,m);){h--;subtract(d,A<_?P:k,_,o);_=d.length;s=1}}else{0==h&&(s=h=1);_=(d=k.slice()).length}_<m&&(d=[0].concat(d));subtract(y,d,m,o);m=y.length;if(-1==s)for(;compare(k,y,A,m)<1;){h++;subtract(y,A<m?P:k,m,o);m=y.length}}else if(0===s){h++;y=[0]}p[u++]=h;if(y[0])y[m++]=U[w]||0;else{y=[U[w]];m=1}}while((w++<v||null!=y[0])&&E--);f=null!=y[0];p[0]||p.splice(0,1)}if(o==a){for(u=1,E=p[0];E>=10;E/=10,u++);round(g,r+(g.e=u+c*l-1)+1,i,f)}else{g.e=c;g.r=+f}return g}}();function format(e,t,r,i){var n,o,s,a,l;null==r?r=P:intCheck(r,0,8);if(!e.c)return e.toString();n=e.c[0];s=e.e;if(null==t){l=coeffToString(e.c);l=1==i||2==i&&s<=E?toExponential(l,s):toFixedPoint(l,s,"0")}else{o=(e=round(new BigNumber(e),t,r)).e;a=(l=coeffToString(e.c)).length;if(1==i||2==i&&(t<=o||o<=E)){for(;a<t;l+="0",a++);l=toExponential(l,o)}else{t-=s;l=toFixedPoint(l,o,"0");if(o+1>a){if(--t>0)for(l+=".";t--;l+="0");}else if((t+=o-a)>0){o+1==a&&(l+=".");for(;t--;l+="0");}}}return e.s<0&&n?"-"+l:l}function maxOrMin(e,t){var r,i,n=0;isArray(e[0])&&(e=e[0]);r=new BigNumber(e[0]);for(;++n<e.length;){if(!(i=new BigNumber(e[n])).s){r=i;break}t.call(r,i)&&(r=i)}return r}function normalise(e,t,r){for(var i=1,n=t.length;!t[--n];t.pop());for(n=t[0];n>=10;n/=10,i++);if((r=i+r*l-1)>I)e.c=e.e=null;else if(r<k)e.c=[e.e=0];else{e.e=r;e.c=t}return e}_=(p=/^(-?)0([xbo])(?=\w[\w.]*$)/i,y=/^([^.]+)\.$/,m=/^\.([^.]+)$/,b=/^-?(Infinity|NaN)$/,w=/^\s*\+(?=[\w.])|^\s+|\s+$/g,function(e,t,r,i){var n,s=r?t:t.replace(w,"");if(b.test(s)){e.s=isNaN(s)?null:s<0?-1:1;e.c=e.e=null}else{if(!r){s=s.replace(p,function(e,t,r){n="x"==(r=r.toLowerCase())?16:"b"==r?2:8;return i&&i!=n?e:t});if(i){n=i;s=s.replace(y,"$1").replace(m,"0.$1")}if(t!=s)return new BigNumber(s,n)}if(BigNumber.DEBUG)throw Error(o+"Not a"+(i?" base "+i:"")+" number: "+t);e.c=e.e=e.s=null}});function round(e,t,r,o){var s,c,f,h,d,_,g,p=e.c,y=u;if(p){e:{for(s=1,h=p[0];h>=10;h/=10,s++);if((c=t-s)<0){c+=l;f=t;g=(d=p[_=0])/y[s-f-1]%10|0}else if((_=i((c+1)/l))>=p.length){if(!o)break e;for(;p.length<=_;p.push(0));d=g=0;s=1;f=(c%=l)-l+1}else{d=h=p[_];for(s=1;h>=10;h/=10,s++);g=(f=(c%=l)-l+s)<0?0:d/y[s-f-1]%10|0}o=o||t<0||null!=p[_+1]||(f<0?d:d%y[s-f-1]);o=r<4?(g||o)&&(0==r||r==(e.s<0?3:2)):g>5||5==g&&(4==r||o||6==r&&(c>0?f>0?d/y[s-f]:0:p[_-1])%10&1||r==(e.s<0?8:7));if(t<1||!p[0]){p.length=0;if(o){t-=e.e+1;p[0]=y[(l-t%l)%l];e.e=-t||0}else p[0]=e.e=0;return e}if(0==c){p.length=_;h=1;_--}else{p.length=_+1;h=y[l-c];p[_]=f>0?n(d/y[s-f]%y[f])*h:0}if(o)for(;;){if(0==_){for(c=1,f=p[0];f>=10;f/=10,c++);f=p[0]+=h;for(h=1;f>=10;f/=10,h++);if(c!=h){e.e++;p[0]==a&&(p[0]=1)}break}p[_]+=h;if(p[_]!=a)break;p[_--]=0;h=1}for(c=p.length;0===p[--c];p.pop());}e.e>I?e.c=e.e=null:e.e<k&&(e.c=[e.e=0])}return e}v.absoluteValue=v.abs=function(){var e=new BigNumber(this);e.s<0&&(e.s=1);return e};v.comparedTo=function(e,t){return compare(this,new BigNumber(e,t))};v.decimalPlaces=v.dp=function(e,t){var r,i,n,o=this;if(null!=e){intCheck(e,0,h);null==t?t=P:intCheck(t,0,8);return round(new BigNumber(o),e+o.e+1,t)}if(!(r=o.c))return null;i=((n=r.length-1)-bitFloor(this.e/l))*l;if(n=r[n])for(;n%10==0;n/=10,i--);i<0&&(i=0);return i};v.dividedBy=v.div=function(e,r){return t(this,new BigNumber(e,r),A,P)};v.dividedToIntegerBy=v.idiv=function(e,r){return t(this,new BigNumber(e,r),0,1)};v.exponentiatedBy=v.pow=function(e,t){var r,s,a,c,u,f,h,d=this;if((e=new BigNumber(e)).c&&!e.isInteger())throw Error(o+"Exponent not an integer: "+e);null!=t&&(t=new BigNumber(t));c=e.e>14;if(!d.c||!d.c[0]||1==d.c[0]&&!d.e&&1==d.c.length||!e.c||!e.c[0]){h=new BigNumber(Math.pow(+d.valueOf(),c?2-isOdd(e):+e));return t?h.mod(t):h}u=e.s<0;if(t){if(t.c?!t.c[0]:!t.s)return new BigNumber(NaN);(s=!u&&d.isInteger()&&t.isInteger())&&(d=d.mod(t))}else{if(e.e>9&&(d.e>0||d.e<-1||(0==d.e?d.c[0]>1||c&&d.c[1]>=24e7:d.c[0]<8e13||c&&d.c[0]<=9999975e7))){a=d.s<0&&isOdd(e)?-0:0;d.e>-1&&(a=1/a);return new BigNumber(u?1/a:a)}M&&(a=i(M/l+2))}if(c){r=new BigNumber(.5);f=isOdd(e)}else f=e%2;u&&(e.s=1);h=new BigNumber(S);for(;;){if(f){if(!(h=h.times(d)).c)break;a?h.c.length>a&&(h.c.length=a):s&&(h=h.mod(t))}if(c){round(e=e.times(r),e.e+1,1);if(!e.c[0])break;c=e.e>14;f=isOdd(e)}else{if(!(e=n(e/2)))break;f=e%2}d=d.times(d);a?d.c&&d.c.length>a&&(d.c.length=a):s&&(d=d.mod(t))}if(s)return h;u&&(h=S.div(h));return t?h.mod(t):a?round(h,M,P,void 0):h};v.integerValue=function(e){var t=new BigNumber(this);null==e?e=P:intCheck(e,0,8);return round(t,t.e+1,e)};v.isEqualTo=v.eq=v.equals=function(e,t){return 0===compare(this,new BigNumber(e,t))};v.isFinite=function(){return!!this.c};v.isGreaterThan=v.gt=function(e,t){return compare(this,new BigNumber(e,t))>0};v.isGreaterThanOrEqualTo=v.gte=function(e,t){return 1===(t=compare(this,new BigNumber(e,t)))||0===t};v.isInteger=function(){return!!this.c&&bitFloor(this.e/l)>this.c.length-2};v.isLessThan=v.lt=function(e,t){return compare(this,new BigNumber(e,t))<0};v.isLessThanOrEqualTo=v.lte=function(e,t){return-1===(t=compare(this,new BigNumber(e,t)))||0===t};v.isNaN=function(){return!this.s};v.isNegative=function(){return this.s<0};v.isPositive=function(){return this.s>0};v.isZero=function(){return!!this.c&&0==this.c[0]};v.minus=function(e,t){var r,i,n,o,s=this,c=s.s;t=(e=new BigNumber(e,t)).s;if(!c||!t)return new BigNumber(NaN);if(c!=t){e.s=-t;return s.plus(e)}var u=s.e/l,f=e.e/l,h=s.c,d=e.c;if(!u||!f){if(!h||!d)return h?(e.s=-t,e):new BigNumber(d?s:NaN);if(!h[0]||!d[0])return d[0]?(e.s=-t,e):new BigNumber(h[0]?s:3==P?-0:0)}u=bitFloor(u);f=bitFloor(f);h=h.slice();if(c=u-f){if(o=c<0){c=-c;n=h}else{f=u;n=d}n.reverse();for(t=c;t--;n.push(0));n.reverse()}else{i=(o=(c=h.length)<(t=d.length))?c:t;for(c=t=0;t<i;t++)if(h[t]!=d[t]){o=h[t]<d[t];break}}o&&(n=h,h=d,d=n,e.s=-e.s);if((t=(i=d.length)-(r=h.length))>0)for(;t--;h[r++]=0);t=a-1;for(;i>c;){if(h[--i]<d[i]){for(r=i;r&&!h[--r];h[r]=t);--h[r];h[i]+=a}h[i]-=d[i]}for(;0==h[0];h.splice(0,1),--f);if(!h[0]){e.s=3==P?-1:1;e.c=[e.e=0];return e}return normalise(e,h,f)};v.modulo=v.mod=function(e,r){var i,n,o=this;e=new BigNumber(e,r);if(!o.c||!e.s||e.c&&!e.c[0])return new BigNumber(NaN);if(!e.c||o.c&&!o.c[0])return new BigNumber(o);if(9==L){n=e.s;e.s=1;i=t(o,e,0,3);e.s=n;i.s*=n}else i=t(o,e,0,L);(e=o.minus(i.times(e))).c[0]||1!=L||(e.s=o.s);return e};v.multipliedBy=v.times=function(e,t){var r,i,n,o,s,c,u,h,d,_,g,p,y,m,b,w=this,v=w.c,S=(e=new BigNumber(e,t)).c;if(!(v&&S&&v[0]&&S[0])){if(!w.s||!e.s||v&&!v[0]&&!S||S&&!S[0]&&!v)e.c=e.e=e.s=null;else{e.s*=w.s;if(v&&S){e.c=[0];e.e=0}else e.c=e.e=null}return e}i=bitFloor(w.e/l)+bitFloor(e.e/l);e.s*=w.s;(u=v.length)<(_=S.length)&&(y=v,v=S,S=y,n=u,u=_,_=n);for(n=u+_,y=[];n--;y.push(0));m=a;b=f;for(n=_;--n>=0;){r=0;g=S[n]%b;p=S[n]/b|0;for(o=n+(s=u);o>n;){r=((h=g*(h=v[--s]%b)+(c=p*h+(d=v[s]/b|0)*g)%b*b+y[o]+r)/m|0)+(c/b|0)+p*d;y[o--]=h%m}y[o]=r}r?++i:y.splice(0,1);return normalise(e,y,i)};v.negated=function(){var e=new BigNumber(this);e.s=-e.s||null;return e};v.plus=function(e,t){var r,i=this,n=i.s;t=(e=new BigNumber(e,t)).s;if(!n||!t)return new BigNumber(NaN);if(n!=t){e.s=-t;return i.minus(e)}var o=i.e/l,s=e.e/l,c=i.c,u=e.c;if(!o||!s){if(!c||!u)return new BigNumber(n/0);if(!c[0]||!u[0])return u[0]?e:new BigNumber(c[0]?i:0*n)}o=bitFloor(o);s=bitFloor(s);c=c.slice();if(n=o-s){if(n>0){s=o;r=u}else{n=-n;r=c}r.reverse();for(;n--;r.push(0));r.reverse()}(n=c.length)-(t=u.length)<0&&(r=u,u=c,c=r,t=n);for(n=0;t;){n=(c[--t]=c[t]+u[t]+n)/a|0;c[t]=a===c[t]?0:c[t]%a}if(n){c=[n].concat(c);++s}return normalise(e,c,s)};v.precision=v.sd=function(e,t){var r,i,n,o=this;if(null!=e&&e!==!!e){intCheck(e,1,h);null==t?t=P:intCheck(t,0,8);return round(new BigNumber(o),e,t)}if(!(r=o.c))return null;i=(n=r.length-1)*l+1;if(n=r[n]){for(;n%10==0;n/=10,i--);for(n=r[0];n>=10;n/=10,i++);}e&&o.e+1>i&&(i=o.e+1);return i};v.shiftedBy=function(e){intCheck(e,-c,c);return this.times("1e"+e)};v.squareRoot=v.sqrt=function(){var e,r,i,n,o,s=this,a=s.c,l=s.s,c=s.e,u=A+4,f=new BigNumber("0.5");if(1!==l||!a||!a[0])return new BigNumber(!l||l<0&&(!a||a[0])?NaN:a?s:1/0);if(0==(l=Math.sqrt(+s))||l==1/0){((r=coeffToString(a)).length+c)%2==0&&(r+="0");l=Math.sqrt(r);c=bitFloor((c+1)/2)-(c<0||c%2);i=new BigNumber(r=l==1/0?"1e"+c:(r=l.toExponential()).slice(0,r.indexOf("e")+1)+c)}else i=new BigNumber(l+"");if(i.c[0]){(l=(c=i.e)+u)<3&&(l=0);for(;;){o=i;i=f.times(o.plus(t(s,o,u,1)));if(coeffToString(o.c).slice(0,l)===(r=coeffToString(i.c)).slice(0,l)){i.e<c&&--l;if("9999"!=(r=r.slice(l-3,l+1))&&(n||"4999"!=r)){if(!+r||!+r.slice(1)&&"5"==r.charAt(0)){round(i,i.e+A+2,1);e=!i.times(i).eq(s)}break}if(!n){round(o,o.e+A+2,0);if(o.times(o).eq(s)){i=o;break}}u+=4;l+=4;n=1}}}return round(i,i.e+A+1,P,e)};v.toExponential=function(e,t){if(null!=e){intCheck(e,0,h);e++}return format(this,e,t,1)};v.toFixed=function(e,t){if(null!=e){intCheck(e,0,h);e=e+this.e+1}return format(this,e,t)};v.toFormat=function(e,t){var r=this.toFixed(e,t);if(this.c){var i,n=r.split("."),o=+T.groupSize,s=+T.secondaryGroupSize,a=T.groupSeparator,l=n[0],c=n[1],u=this.s<0,f=u?l.slice(1):l,h=f.length;s&&(i=o,o=s,s=i,h-=i);if(o>0&&h>0){i=h%o||o;l=f.substr(0,i);for(;i<h;i+=o)l+=a+f.substr(i,o);s>0&&(l+=a+f.slice(i));u&&(l="-"+l)}r=c?l+T.decimalSeparator+((s=+T.fractionGroupSize)?c.replace(new RegExp("\\d{"+s+"}\\B","g"),"$&"+T.fractionGroupSeparator):c):l}return r};v.toFraction=function(e){var r,i,n,s,a,c,f,h,d,_,g,p,y=this,m=y.c;if(null!=e&&(!(h=new BigNumber(e)).isInteger()&&(h.c||1!==h.s)||h.lt(S)))throw Error(o+"Argument "+(h.isInteger()?"out of range: ":"not an integer: ")+e);if(!m)return y.toString();i=new BigNumber(S);_=n=new BigNumber(S);s=d=new BigNumber(S);p=coeffToString(m);c=i.e=p.length-y.e-1;i.c[0]=u[(f=c%l)<0?l+f:f];e=!e||h.comparedTo(i)>0?c>0?i:_:h;f=I;I=1/0;h=new BigNumber(p);d.c[0]=0;for(;;){g=t(h,i,0,1);if(1==(a=n.plus(g.times(s))).comparedTo(e))break;n=s;s=a;_=d.plus(g.times(a=_));d=a;i=h.minus(g.times(a=i));h=a}a=t(e.minus(n),s,0,1);d=d.plus(a.times(_));n=n.plus(a.times(s));d.s=_.s=y.s;r=t(_,s,c*=2,P).minus(y).abs().comparedTo(t(d,n,c,P).minus(y).abs())<1?[_.toString(),s.toString()]:[d.toString(),n.toString()];I=f;return r};v.toNumber=function(){return+this};v.toPrecision=function(e,t){null!=e&&intCheck(e,1,h);return format(this,e,t,2)};v.toString=function(e){var t,r=this,i=r.s,n=r.e;if(null===n)if(i){t="Infinity";i<0&&(t="-"+t)}else t="NaN";else{t=coeffToString(r.c);if(null==e)t=n<=E||n>=U?toExponential(t,n):toFixedPoint(t,n,"0");else{intCheck(e,2,B.length,"Base");t=d(toFixedPoint(t,n,"0"),10,e,i,!0)}i<0&&r.c[0]&&(t="-"+t)}return t};v.valueOf=v.toJSON=function(){var e,t=this,r=t.e;if(null===r)return t.toString();e=coeffToString(t.c);e=r<=E||r>=U?toExponential(e,r):toFixedPoint(e,r,"0");return t.s<0?"-"+e:e};v._isBigNumber=!0;null!=e&&BigNumber.set(e);return BigNumber}())["default"]=t.BigNumber=t;e.BigNumber=t}(Class.scope);BigNumber=Class.scope.BigNumber;BigNumber.config({DECIMAL_PLACES:10});class NumberUtils{static isUint8(e){return Number.isInteger(e)&&e>=0&&e<=NumberUtils.UINT8_MAX}static isUint16(e){return Number.isInteger(e)&&e>=0&&e<=NumberUtils.UINT16_MAX}static isUint32(e){return Number.isInteger(e)&&e>=0&&e<=NumberUtils.UINT32_MAX}static isUint64(e){return Number.isInteger(e)&&e>=0&&e<=NumberUtils.UINT64_MAX}static randomUint32(){return Math.floor(Math.random()*(NumberUtils.UINT32_MAX+1))}static randomUint64(){return Math.floor(Math.random()*(NumberUtils.UINT64_MAX+1))}}NumberUtils.UINT8_MAX=255;NumberUtils.UINT16_MAX=65535;NumberUtils.UINT32_MAX=4294967295;NumberUtils.UINT64_MAX=Number.MAX_SAFE_INTEGER;Class.register(NumberUtils);class MerklePath{constructor(e){if(!Array.isArray(e)||!NumberUtils.isUint8(e.length)||e.some(e=>!(e instanceof MerklePathNode)))throw new Error("Malformed nodes");this._nodes=e}static compute(e,t,r=MerkleTree._hash){const i=r(t),n=[];MerklePath._compute(e,i,n,r);return new MerklePath(n)}static _compute(e,t,r,i){const n=e.length;let o;if(0===n)return{containsLeaf:!1,inner:o=Hash.light(new Uint8Array(0))};if(1===n)return{containsLeaf:(o=i(e[0])).equals(t),inner:o};const s=Math.round(n/2),a=e.slice(0,s),l=e.slice(s),{containsLeaf:c,inner:u}=MerklePath._compute(a,t,r,i),{containsLeaf:f,inner:h}=MerklePath._compute(l,t,r,i);o=Hash.light(BufferUtils.concatTypedArrays(u.serialize(),h.serialize()));if(c){r.push(new MerklePathNode(h,!1));return{containsLeaf:!0,inner:o}}if(f){r.push(new MerklePathNode(u,!0));return{containsLeaf:!0,inner:o}}return{containsLeaf:!1,inner:o}}computeRoot(e,t=MerkleTree._hash){let r=t(e);for(const i of this._nodes){const e=i.left,t=i.hash,n=new SerialBuffer(2*t.serializedSize);e&&t.serialize(n);r.serialize(n);e||t.serialize(n);r=Hash.light(n)}return r}static _compress(e){const t=e.length,r=Math.ceil(t/8),i=new Uint8Array(r);for(let n=0;n<t;n++)e[n].left&&(i[Math.floor(n/8)]|=128>>>n%8);return i}static unserialize(e){const t=e.readUint8(),r=Math.ceil(t/8),i=e.read(r),n=[];for(let o=0;o<t;o++){const t=0!=(i[Math.floor(o/8)]&128>>>o%8),r=Hash.unserialize(e);n.push(new MerklePathNode(r,t))}return new MerklePath(n)}serialize(e){(e=e||new SerialBuffer(this.serializedSize)).writeUint8(this._nodes.length);e.write(MerklePath._compress(this._nodes));for(const t of this._nodes)t.hash.serialize(e);return e}get serializedSize(){return 1+Math.ceil(this._nodes.length/8)+this._nodes.reduce((e,t)=>e+t.hash.serializedSize,0)}equals(e){return e instanceof MerklePath&&this._nodes.length===e._nodes.length&&this._nodes.every((t,r)=>t.equals(e._nodes[r]))}get nodes(){return this._nodes}}Class.register(MerklePath);class MerklePathNode{constructor(e,t){this._hash=e;this._left=t}get hash(){return this._hash}get left(){return this._left}equals(e){return e instanceof MerklePathNode&&this._hash.equals(e.hash)&&this._left===e.left}}Class.register(MerklePathNode);class PlatformUtils{static isBrowser(){return"undefined"!=typeof window}static isNodeJs(){return!PlatformUtils.isBrowser()&&"object"==typeof process&&"function"==typeof require}static supportsWebRTC(){return!!(PlatformUtils.isBrowser()?window.RTCPeerConnection||window.webkitRTCPeerConnection:null)}static supportsWS(){return!PlatformUtils.isBrowser()||location&&"http:"===location.protocol}static isOnline(){return!PlatformUtils.isBrowser()||!("onLine"in window.navigator)||window.navigator.onLine}}Class.register(PlatformUtils);class StringUtils{static isMultibyte(e){return/[\uD800-\uDFFF]/.test(e)}static isHex(e){return/^[0-9A-Fa-f]*$/.test(e)}static isHexBytes(e,t){return!!StringUtils.isHex(e)&&(e.length%2==0&&("number"!=typeof t||e.length/2===t))}static commonPrefix(e,t){let r=0;for(;r<e.length&&e[r]===t[r];++r);return e.substr(0,r)}}Class.register(StringUtils);class Policy{static coinsToSatoshis(e){return Math.round(e*Policy.SATOSHIS_PER_COIN)}static satoshisToCoins(e){return e/Policy.SATOSHIS_PER_COIN}static supplyAfter(e){let t=Math.floor(e/Policy._supplyCacheInterval)*Policy._supplyCacheInterval;const r=(t=Math.max(0,Math.min(t,Policy._supplyCacheMax)))/Policy._supplyCacheInterval,i=Math.floor(e/Policy._supplyCacheInterval);let n=0===t?Policy.INITIAL_SUPPLY:Policy._supplyCache.get(t);for(let o=r;o<i;++o){t=o*Policy._supplyCacheInterval;const e=(o+1)*Policy._supplyCacheInterval-1;n=Policy._supplyAfter(n,e,t);Policy._supplyCache.set(e+1,n);Policy._supplyCacheMax=e+1}return Policy._supplyAfter(n,e,i*Policy._supplyCacheInterval)}static _supplyAfter(e,t,r=0){let i=e;for(let n=r;n<=t;++n)i+=Policy._blockRewardAt(i,n);return i}static blockRewardAt(e){const t=Policy.supplyAfter(e-1);return Policy._blockRewardAt(t,e)}static _blockRewardAt(e,t){if(t<=0)return 0;const r=Policy.TOTAL_SUPPLY-e;return t>=Policy.EMISSION_TAIL_START&&r>=Policy.EMISSION_TAIL_REWARD?Policy.EMISSION_TAIL_REWARD:(r-r%Policy.EMISSION_SPEED)/Policy.EMISSION_SPEED}}Policy.BLOCK_TIME=60;Policy.BLOCK_SIZE_MAX=1e5;Policy.BLOCK_TARGET_MAX=new BigNumber(2).pow(240);Policy.DIFFICULTY_BLOCK_WINDOW=120;Policy.DIFFICULTY_MAX_ADJUSTMENT_FACTOR=2;Policy.TRANSACTION_VALIDITY_WINDOW=120;Policy.SATOSHIS_PER_COIN=1e5;Policy.TOTAL_SUPPLY=21e14;Policy.INITIAL_SUPPLY=252e12;Policy.EMISSION_SPEED=Math.pow(2,22);Policy.EMISSION_TAIL_START=48692960;Policy.EMISSION_TAIL_REWARD=4e3;Policy.M=240;Policy.K=120;Policy.DELTA=.15;Policy.NUM_BLOCKS_VERIFICATION=250;Policy.NUM_SNAPSHOTS_MAX=20;Policy._supplyCache=new Map;Policy._supplyCacheMax=0;Policy._supplyCacheInterval=5e3;Class.register(Policy);class Serializable{equals(e){return e instanceof Serializable&&BufferUtils.equals(this.serialize(),e.serialize())}compare(e){return BufferUtils.compare(this.serialize(),e.serialize())}hashCode(){return this.toBase64()}serialize(e){}toString(){return this.toBase64()}toBase64(){return BufferUtils.toBase64(this.serialize())}toHex(){return BufferUtils.toHex(this.serialize())}}Class.register(Serializable);class Hash extends Serializable{constructor(e,t=Hash.Algorithm.BLAKE2B){if(null===e)e=new Uint8Array(Hash.getSize(t));else{if(!(e instanceof Uint8Array))throw new Error("Primitive: Invalid type");if(e.length!==Hash.getSize(t))throw new Error("Primitive: Invalid length")}super();this._obj=e;this._algorithm=t}static light(e){return Hash.blake2b(e)}static blake2b(e){return new Hash(Hash.computeBlake2b(e),Hash.Algorithm.BLAKE2B)}static hard(e){return Hash.argon2d(e)}static argon2d(e){return(0,_asyncToGenerator3["default"])(function*(){return new Hash(yield(yield CryptoWorker.getInstanceAsync()).computeArgon2d(e),Hash.Algorithm.ARGON2D)})()}static sha256(e){return new Hash(Hash.computeSha256(e),Hash.Algorithm.SHA256)}static compute(e,t){switch(t){case Hash.Algorithm.BLAKE2B:return Hash.blake2b(e);case Hash.Algorithm.SHA256:return Hash.sha256(e);default:throw new Error("Invalid hash algorithm")}}static unserialize(e,t=Hash.Algorithm.BLAKE2B){return new Hash(e.read(Hash.getSize(t)),t)}serialize(e){(e=e||new SerialBuffer(this.serializedSize)).write(this._obj);return e}subarray(e,t){return this._obj.subarray(e,t)}get serializedSize(){return Hash.SIZE.get(this._algorithm)}get array(){return this._obj}get algorithm(){return this._algorithm}equals(e){return e instanceof Hash&&e._algorithm===this._algorithm&&super.equals(e)}static fromBase64(e){return new Hash(BufferUtils.fromBase64(e))}static fromHex(e){return new Hash(BufferUtils.fromHex(e))}static fromString(e){try{return Hash.fromHex(e)}catch(t){}try{return Hash.fromBase64(e)}catch(t){}throw new Error("Invalid hash format")}static isHash(e){return e instanceof Hash}static getSize(e){const t=Hash.SIZE.get(e);if("number"!=typeof t)throw new Error("Invalid hash algorithm");return t}static computeBlake2b(e){if(PlatformUtils.isNodeJs()){const t=new Uint8Array(Hash.getSize(Hash.Algorithm.BLAKE2B));NodeNative.node_blake2(t,new Uint8Array(e));return t}{let r;try{r=Module.stackSave();const i=Hash.getSize(Hash.Algorithm.BLAKE2B),n=Module.stackAlloc(i),o=Module.stackAlloc(e.length);new Uint8Array(Module.HEAPU8.buffer,o,e.length).set(e);const s=Module._nimiq_blake2(n,o,e.length);if(0!==s)throw s;const a=new Uint8Array(i);a.set(new Uint8Array(Module.HEAPU8.buffer,n,i));return a}catch(t){Log.w(Hash,t);throw t}finally{r!==undefined&&Module.stackRestore(r)}}}static computeSha256(e){if(PlatformUtils.isNodeJs()){const t=new Uint8Array(Hash.getSize(Hash.Algorithm.SHA256));NodeNative.node_sha256(t,new Uint8Array(e));return t}{let r;try{r=Module.stackSave();const i=Hash.getSize(Hash.Algorithm.SHA256),n=Module.stackAlloc(i),o=Module.stackAlloc(e.length);new Uint8Array(Module.HEAPU8.buffer,o,e.length).set(e);Module._nimiq_sha256(n,o,e.length);const s=new Uint8Array(i);s.set(new Uint8Array(Module.HEAPU8.buffer,n,i));return s}catch(t){Log.w(Hash,t);throw t}finally{r!==undefined&&Module.stackRestore(r)}}}}Hash.Algorithm={BLAKE2B:1,ARGON2D:2,SHA256:3,SHA512:4};Hash.SIZE=new Map;Hash.SIZE.set(Hash.Algorithm.BLAKE2B,32);Hash.SIZE.set(Hash.Algorithm.ARGON2D,32);Hash.SIZE.set(Hash.Algorithm.SHA256,32);Hash.SIZE.set(Hash.Algorithm.SHA512,64);Hash.NULL=new Hash(new Uint8Array(32));Class.register(Hash);class PrivateKey extends Serializable{constructor(e){super();if(!(e instanceof Uint8Array))throw new Error("Primitive: Invalid type");if(e.length!==PrivateKey.SIZE)throw new Error("Primitive: Invalid length");this._obj=e}static generate(){const e=new Uint8Array(PrivateKey.SIZE);CryptoWorker.lib.getRandomValues(e);return new PrivateKey(e)}static unserialize(e){return new PrivateKey(e.read(PrivateKey.SIZE))}serialize(e){(e=e||new SerialBuffer(this.serializedSize)).write(this._obj);return e}get serializedSize(){return PrivateKey.SIZE}overwrite(e){this._obj.set(e._obj)}equals(e){return e instanceof PrivateKey&&super.equals(e)}static _privateKeyDelinearize(e,t,r){if(e.byteLength!==PrivateKey.SIZE||t.byteLength!==PublicKey.SIZE||r.byteLength!==Hash.getSize(Hash.Algorithm.SHA512))throw Error("Wrong buffer size.");if(PlatformUtils.isNodeJs()){const i=new Uint8Array(PublicKey.SIZE);NodeNative.node_ed25519_derive_delinearized_private_key(i,new Uint8Array(r),new Uint8Array(t),new Uint8Array(e));return i}{let n;try{n=Module.stackSave();const o=Module.stackAlloc(PublicKey.SIZE),s=Module.stackAlloc(e.length),a=Module.stackAlloc(t.length),l=Module.stackAlloc(r.length);new Uint8Array(Module.HEAPU8.buffer,s,e.length).set(e);new Uint8Array(Module.HEAPU8.buffer,a,t.length).set(t);new Uint8Array(Module.HEAPU8.buffer,l,r.length).set(r);Module._ed25519_derive_delinearized_private_key(o,l,a,s);const c=new Uint8Array(PrivateKey.SIZE);c.set(new Uint8Array(Module.HEAPU8.buffer,o,PrivateKey.SIZE));return c}catch(i){Log.w(CryptoWorkerImpl,i);throw i}finally{n!==undefined&&Module.stackRestore(n)}}}}PrivateKey.SIZE=32;Class.register(PrivateKey);class PublicKey extends Serializable{static copy(e){return e?new PublicKey(new Uint8Array(e._obj)):e}constructor(e){super();if(!(e instanceof Uint8Array))throw new Error("Primitive: Invalid type");if(e.length!==PublicKey.SIZE)throw new Error("Primitive: Invalid length");this._obj=e}static derive(e){return new PublicKey(PublicKey._publicKeyDerive(e._obj))}static sum(e){(e=e.slice()).sort((e,t)=>e.compare(t));return PublicKey._delinearizeAndAggregatePublicKeys(e)}static unserialize(e){return new PublicKey(e.read(PublicKey.SIZE))}serialize(e){(e=e||new SerialBuffer(this.serializedSize)).write(this._obj);return e}get serializedSize(){return PublicKey.SIZE}equals(e){return e instanceof PublicKey&&super.equals(e)}hash(){return Hash.light(this.serialize())}compare(e){return BufferUtils.compare(this._obj,e._obj)}toAddress(){return Address.fromHash(this.hash())}toPeerId(){return new PeerId(this.hash().subarray(0,16))}static _delinearizeAndAggregatePublicKeys(e){const t=e.map(e=>e.serialize()),r=PublicKey._publicKeysHash(t),i=PublicKey._publicKeysDelinearizeAndAggregate(t,r);return new PublicKey(i)}static _publicKeyDerive(e){if(e.byteLength!==PrivateKey.SIZE)throw Error("Wrong buffer size.");if(PlatformUtils.isNodeJs()){const t=new Uint8Array(PublicKey.SIZE);NodeNative.node_ed25519_public_key_derive(t,new Uint8Array(e));return t}{let r;try{r=Module.stackSave();const i=Module.stackAlloc(PublicKey.SIZE),n=new Uint8Array(Module.HEAP8.buffer,i,PrivateKey.SIZE);n.set(e);const o=Module.stackAlloc(e.length),s=new Uint8Array(Module.HEAP8.buffer,o,PrivateKey.SIZE);s.set(e);Module._ed25519_public_key_derive(i,o);s.fill(0);const a=new Uint8Array(PublicKey.SIZE);a.set(n);return a}catch(t){Log.w(PublicKey,t);throw t}finally{r!==undefined&&Module.stackRestore(r)}}}static _publicKeysHash(e){if(e.some(e=>e.byteLength!==PublicKey.SIZE))throw Error("Wrong buffer size.");const t=new Uint8Array(e.length*PublicKey.SIZE);for(let i=0;i<e.length;++i)t.set(e[i],i*PublicKey.SIZE);if(PlatformUtils.isNodeJs()){const r=new Uint8Array(Hash.getSize(Hash.Algorithm.SHA512));NodeNative.node_ed25519_hash_public_keys(r,t,e.length);return r}{let i;try{i=Module.stackSave();const n=Hash.getSize(Hash.Algorithm.SHA512),o=Module.stackAlloc(n),s=Module.stackAlloc(t.length);new Uint8Array(Module.HEAPU8.buffer,s,t.length).set(t);Module._ed25519_hash_public_keys(o,s,e.length);const a=new Uint8Array(n);a.set(new Uint8Array(Module.HEAPU8.buffer,o,n));return a}catch(r){Log.w(PublicKey,r);throw r}finally{i!==undefined&&Module.stackRestore(i)}}}static _publicKeyDelinearize(e,t){if(e.byteLength!==PublicKey.SIZE||t.byteLength!==Hash.getSize(Hash.Algorithm.SHA512))throw Error("Wrong buffer size.");if(PlatformUtils.isNodeJs()){const r=new Uint8Array(PublicKey.SIZE);NodeNative.node_ed25519_delinearize_public_key(r,new Uint8Array(t),new Uint8Array(e));return r}{let i;try{i=Module.stackSave();const n=Module.stackAlloc(PublicKey.SIZE),o=Module.stackAlloc(e.length),s=Module.stackAlloc(t.length);new Uint8Array(Module.HEAPU8.buffer,o,e.length).set(e);new Uint8Array(Module.HEAPU8.buffer,s,t.length).set(t);Module._ed25519_delinearize_public_key(n,s,o);const a=new Uint8Array(PublicKey.SIZE);a.set(new Uint8Array(Module.HEAPU8.buffer,n,PublicKey.SIZE));return a}catch(r){Log.w(PublicKey,r);throw r}finally{i!==undefined&&Module.stackRestore(i)}}}static _publicKeysDelinearizeAndAggregate(e,t){if(e.some(e=>e.byteLength!==PublicKey.SIZE)||t.byteLength!==Hash.getSize(Hash.Algorithm.SHA512))throw Error("Wrong buffer size.");const r=new Uint8Array(e.length*PublicKey.SIZE);for(let n=0;n<e.length;++n)r.set(e[n],n*PublicKey.SIZE);if(PlatformUtils.isNodeJs()){const i=new Uint8Array(PublicKey.SIZE);NodeNative.node_ed25519_aggregate_delinearized_public_keys(i,new Uint8Array(t),r,e.length);return i}{let n;try{n=Module.stackSave();const o=Module.stackAlloc(PublicKey.SIZE),s=Module.stackAlloc(r.length),a=Module.stackAlloc(t.length);new Uint8Array(Module.HEAPU8.buffer,s,r.length).set(r);new Uint8Array(Module.HEAPU8.buffer,a,t.length).set(t);Module._ed25519_aggregate_delinearized_public_keys(o,a,s,e.length);const l=new Uint8Array(PublicKey.SIZE);l.set(new Uint8Array(Module.HEAPU8.buffer,o,PublicKey.SIZE));return l}catch(i){Log.w(PublicKey,i);throw i}finally{n!==undefined&&Module.stackRestore(n)}}}}PublicKey.SIZE=32;Class.register(PublicKey);class KeyPair extends Serializable{constructor(e,t,r=!1,i=null){if(!(e instanceof Object))throw new Error("Primitive: Invalid type");if(!(t instanceof Object))throw new Error("Primitive: Invalid type");super();this._locked=r;this._lockedInternally=r;this._lockSalt=i;this._publicKey=t;this._internalPrivateKey=new PrivateKey(e.serialize())}static generate(){const e=PrivateKey.generate();return new KeyPair(e,PublicKey.derive(e))}static derive(e){return new KeyPair(e,PublicKey.derive(e))}static fromHex(e){return KeyPair.unserialize(BufferUtils.fromHex(e))}static fromEncrypted(e,t){return(0,_asyncToGenerator3["default"])(function*(){if(1!==e.readUint8())throw new Error("Unsupported type");const r=e.readUint8();if(r>32)throw new Error("Rounds out-of-bounds");const i=Math.pow(2,r),n=PrivateKey.unserialize(e),o=e.read(KeyPair.EXPORT_SALT_LENGTH),s=e.read(KeyPair.EXPORT_CHECKSUM_LENGTH),a=new PrivateKey(yield KeyPair._otpKdf(n.serialize(),t,o,i)),l=KeyPair.derive(a),c=l.publicKey.hash();if(!BufferUtils.equals(c.subarray(0,4),s))throw new Error("Invalid key");return l})()}static unserialize(e){const t=PrivateKey.unserialize(e),r=PublicKey.unserialize(e);let i=!1,n=null;if(e.readPos<e.byteLength){if(1===e.readUint8()){i=!0;n=e.read(32)}}return new KeyPair(t,r,i,n)}serialize(e){e=e||new SerialBuffer(this.serializedSize);this._privateKey.serialize(e);this.publicKey.serialize(e);if(this._locked){e.writeUint8(1);e.write(this._lockSalt)}else e.writeUint8(0);return e}get privateKey(){if(this.isLocked)throw new Error("Wallet is locked");return this._privateKey}get _privateKey(){return this._unlockedPrivateKey||this._internalPrivateKey}get publicKey(){return this._publicKey||(this._publicKey=new PublicKey(this._obj.publicKey))}get serializedSize(){return this._privateKey.serializedSize+this.publicKey.serializedSize+(this._locked?this._lockSalt.byteLength+1:1)}exportEncrypted(e,t){var r=this;return(0,_asyncToGenerator3["default"])(function*(){const i=r._locked;if(r._locked)try{yield r.unlock(t||e)}catch(s){throw new Error("KeyPair is locked and lock key mismatches")}const n=new Uint8Array(KeyPair.EXPORT_SALT_LENGTH);CryptoWorker.lib.getRandomValues(n);const o=new SerialBuffer(r.encryptedSize);o.writeUint8(1);o.writeUint8(Math.log2(KeyPair.EXPORT_KDF_ROUNDS));o.write(yield KeyPair._otpKdf(r.privateKey.serialize(),e,n,KeyPair.EXPORT_KDF_ROUNDS));o.write(n);o.write(r.publicKey.hash().subarray(0,KeyPair.EXPORT_CHECKSUM_LENGTH));i&&r.relock();return o})()}get encryptedSize(){return 2+this.privateKey.serializedSize+KeyPair.EXPORT_SALT_LENGTH+KeyPair.EXPORT_CHECKSUM_LENGTH}lock(e,t){var r=this;return(0,_asyncToGenerator3["default"])(function*(){if(r._locked)throw new Error("KeyPair already locked");t&&(r._lockSalt=t);if(!r._lockSalt||0===r._lockSalt.length){r._lockSalt=new Uint8Array(32);CryptoWorker.lib.getRandomValues(r._lockSalt)}r._internalPrivateKey.overwrite(yield r._otpPrivateKey(e));r._clearUnlockedPrivateKey();r._locked=!0;r._lockedInternally=!0})()}unlock(e){var t=this;return(0,_asyncToGenerator3["default"])(function*(){if(!t._locked)throw new Error("KeyPair not locked");const r=yield t._otpPrivateKey(e);if(!PublicKey.derive(r).equals(t.publicKey))throw new Error("Invalid key");t._unlockedPrivateKey=r;t._locked=!1})()}relock(){if(this._locked)throw new Error("KeyPair already locked");if(!this._lockedInternally)throw new Error("KeyPair was never locked");this._clearUnlockedPrivateKey();this._locked=!0}_clearUnlockedPrivateKey(){if(this._lockedInternally&&!this._locked){this._unlockedPrivateKey.overwrite(PrivateKey.unserialize(new SerialBuffer(this._unlockedPrivateKey.serializedSize)));this._unlockedPrivateKey=null}}_otpPrivateKey(e){var t=this;return(0,_asyncToGenerator3["default"])(function*(){return new PrivateKey(yield KeyPair._otpKdf(t._privateKey.serialize(),e,t._lockSalt,KeyPair.LOCK_KDF_ROUNDS))})()}static _otpKdf(e,t,r,i){return(0,_asyncToGenerator3["default"])(function*(){return BufferUtils.xor(e,yield(yield CryptoWorker.getInstanceAsync()).kdf(t,r,i))})()}get isLocked(){return this._locked}equals(e){return e instanceof KeyPair&&super.equals(e)}}KeyPair.LOCK_KDF_ROUNDS=256;KeyPair.EXPORT_KDF_ROUNDS=256;KeyPair.EXPORT_CHECKSUM_LENGTH=4;KeyPair.EXPORT_SALT_LENGTH=16;Class.register(KeyPair);class RandomSecret extends Serializable{constructor(e){super();if(!(e instanceof Uint8Array))throw new Error("Primitive: Invalid type");if(e.length!==RandomSecret.SIZE)throw new Error("Primitive: Invalid length");this._obj=e}static unserialize(e){return new RandomSecret(e.read(RandomSecret.SIZE))}serialize(e){(e=e||new SerialBuffer(this.serializedSize)).write(this._obj);return e}get serializedSize(){return RandomSecret.SIZE}equals(e){return e instanceof RandomSecret&&super.equals(e)}}RandomSecret.SIZE=32;Class.register(RandomSecret);class Signature extends Serializable{static copy(e){if(!e)return e;const t=new Uint8Array(e._obj);return new Signature(t)}constructor(e){super();if(!(e instanceof Uint8Array))throw new Error("Primitive: Invalid type");if(e.length!==Signature.SIZE)throw new Error("Primitive: Invalid length");this._obj=e}static create(e,t,r){return new Signature(Signature._signatureCreate(e._obj,t._obj,r))}static fromPartialSignatures(e,t){const r=Signature._combinePartialSignatures(e.serialize(),t.map(e=>e.serialize()));return new Signature(r)}static unserialize(e){return new Signature(e.read(Signature.SIZE))}serialize(e){(e=e||new SerialBuffer(this.serializedSize)).write(this._obj);return e}get serializedSize(){return Signature.SIZE}verify(e,t){return Signature._signatureVerify(e._obj,t,this._obj)}equals(e){return e instanceof Signature&&super.equals(e)}static _combinePartialSignatures(e,t){const r=Signature._aggregatePartialSignatures(t);return BufferUtils.concatTypedArrays(e,r)}static _aggregatePartialSignatures(e){return e.reduce((e,t)=>Signature._scalarsAdd(e,t))}static _scalarsAdd(e,t){if(e.byteLength!==PartialSignature.SIZE||t.byteLength!==PartialSignature.SIZE)throw Error("Wrong buffer size.");if(PlatformUtils.isNodeJs()){const r=new Uint8Array(PartialSignature.SIZE);NodeNative.node_ed25519_add_scalars(r,new Uint8Array(e),new Uint8Array(t));return r}{let i;try{i=Module.stackSave();const n=Module.stackAlloc(PartialSignature.SIZE),o=Module.stackAlloc(e.length),s=Module.stackAlloc(t.length);new Uint8Array(Module.HEAPU8.buffer,o,e.length).set(e);new Uint8Array(Module.HEAPU8.buffer,s,t.length).set(t);Module._ed25519_add_scalars(n,o,s);const a=new Uint8Array(PartialSignature.SIZE);a.set(new Uint8Array(Module.HEAPU8.buffer,n,PartialSignature.SIZE));return a}catch(r){Log.w(Signature,r);throw r}finally{i!==undefined&&Module.stackRestore(i)}}}static _signatureCreate(e,t,r){if(t.byteLength!==PublicKey.SIZE||e.byteLength!==PrivateKey.SIZE)throw Error("Wrong buffer size.");if(PlatformUtils.isNodeJs()){const i=new Uint8Array(Signature.SIZE);NodeNative.node_ed25519_sign(i,new Uint8Array(r),new Uint8Array(t),new Uint8Array(e));return i}{let n;try{n=Module.stackSave();const o=Module.stackAlloc(Signature.SIZE),s=new Uint8Array(Module.HEAP8.buffer,o,Signature.SIZE),a=Module.stackAlloc(r.length);new Uint8Array(Module.HEAP8.buffer,a,r.length).set(r);const l=Module.stackAlloc(t.length);new Uint8Array(Module.HEAP8.buffer,l,t.length).set(t);const c=Module.stackAlloc(e.length),u=new Uint8Array(Module.HEAP8.buffer,c,e.length);u.set(e);Module._ed25519_sign(o,a,r.byteLength,l,c);u.fill(0);const f=new Uint8Array(Signature.SIZE);f.set(s);return f}catch(i){Log.w(Signature,i);throw i}finally{n!==undefined&&Module.stackRestore(n)}}}static _signatureVerify(e,t,r){if(PlatformUtils.isNodeJs())return!!NodeNative.node_ed25519_verify(new Uint8Array(r),new Uint8Array(t),new Uint8Array(e));{let n;try{n=Module.stackSave();const o=Module.stackAlloc(e.length);new Uint8Array(Module.HEAP8.buffer,o,e.length).set(e);const s=Module.stackAlloc(t.length);new Uint8Array(Module.HEAP8.buffer,s,t.length).set(t);const a=Module.stackAlloc(r.length);new Uint8Array(Module.HEAP8.buffer,a,r.length).set(r);return!!Module._ed25519_verify(a,s,t.byteLength,o)}catch(i){Log.w(Signature,i);throw i}finally{n!==undefined&&Module.stackRestore(n)}}}}Signature.SIZE=64;Class.register(Signature);class Commitment extends Serializable{static copy(e){return e?new Commitment(new Uint8Array(e._obj)):e}static sum(e){return new Commitment(Commitment._commitmentsAggregate(e.map(e=>e._obj)))}constructor(e){super();if(!(e instanceof Uint8Array))throw new Error("Primitive: Invalid type");if(e.length!==Commitment.SIZE)throw new Error("Primitive: Invalid length");this._obj=e}static unserialize(e){return new Commitment(e.read(Commitment.SIZE))}serialize(e){(e=e||new SerialBuffer(this.serializedSize)).write(this._obj);return e}get serializedSize(){return Commitment.SIZE}equals(e){return e instanceof Commitment&&super.equals(e)}static _commitmentsAggregate(e){if(e.some(e=>e.byteLength!==PublicKey.SIZE))throw Error("Wrong buffer size.");const t=new Uint8Array(e.length*PublicKey.SIZE);for(let i=0;i<e.length;++i)t.set(e[i],i*PublicKey.SIZE);if(PlatformUtils.isNodeJs()){const r=new Uint8Array(PublicKey.SIZE);NodeNative.node_ed25519_aggregate_commitments(r,t,e.length);return r}{let i;try{i=Module.stackSave();const n=Module.stackAlloc(PublicKey.SIZE),o=Module.stackAlloc(t.length);new Uint8Array(Module.HEAPU8.buffer,o,t.length).set(t);Module._ed25519_aggregate_commitments(n,o,e.length);const s=new Uint8Array(PublicKey.SIZE);s.set(new Uint8Array(Module.HEAPU8.buffer,n,PublicKey.SIZE));return s}catch(r){Log.w(CryptoWorkerImpl,r);throw r}finally{i!==undefined&&Module.stackRestore(i)}}}}Commitment.SIZE=32;Class.register(Commitment);class CommitmentPair extends Serializable{constructor(e,t){super();if(!(e instanceof RandomSecret))throw new Error("Primitive: Invalid type");if(!(t instanceof Commitment))throw new Error("Primitive: Invalid type");this._secret=e;this._commitment=t}static generate(){const e=new Uint8Array(CommitmentPair.RANDOMNESS_SIZE);CryptoWorker.lib.getRandomValues(e);const t=CommitmentPair._commitmentCreate(e);return new CommitmentPair(new RandomSecret(t.secret),new Commitment(t.commitment))}static unserialize(e){const t=RandomSecret.unserialize(e),r=Commitment.unserialize(e);return new CommitmentPair(t,r)}static fromHex(e){return this.unserialize(BufferUtils.fromHex(e))}serialize(e){e=e||new SerialBuffer(this.serializedSize);this.secret.serialize(e);this.commitment.serialize(e);return e}get secret(){return this._secret}get commitment(){return this._commitment}get serializedSize(){return this.secret.serializedSize+this.commitment.serializedSize}equals(e){return e instanceof CommitmentPair&&super.equals(e)}static _commitmentCreate(e){if(PlatformUtils.isNodeJs()){const t=new Uint8Array(PublicKey.SIZE),r=new Uint8Array(PrivateKey.SIZE);NodeNative.node_ed25519_create_commitment(r,t,e);return{commitment:t,secret:r}}{let r;try{r=Module.stackSave();const i=Module.stackAlloc(PublicKey.SIZE),n=Module.stackAlloc(PrivateKey.SIZE),o=Module.stackAlloc(e.length);new Uint8Array(Module.HEAPU8.buffer,o,e.length).set(e);const s=Module._ed25519_create_commitment(n,i,o);if(1!==s)throw new Error(`Secret must not be 0 or 1: ${s}`);const a=new Uint8Array(PublicKey.SIZE),l=new Uint8Array(PrivateKey.SIZE);a.set(new Uint8Array(Module.HEAPU8.buffer,i,PublicKey.SIZE));l.set(new Uint8Array(Module.HEAPU8.buffer,n,PrivateKey.SIZE));return{commitment:a,secret:l}}catch(t){Log.w(CommitmentPair,t);throw t}finally{r!==undefined&&Module.stackRestore(r)}}}}CommitmentPair.SERIALIZED_SIZE=RandomSecret.SIZE+Signature.SIZE;CommitmentPair.RANDOMNESS_SIZE=32;Class.register(CommitmentPair);class PartialSignature extends Serializable{constructor(e){super();if(!(e instanceof Uint8Array))throw new Error("Primitive: Invalid type");if(e.length!==PartialSignature.SIZE)throw new Error("Primitive: Invalid length");this._obj=e}static create(e,t,r,i,n,o){const s=PartialSignature._delinearizedPartialSignatureCreate(r.map(e=>e._obj),e._obj,t._obj,i._obj,n._obj,o);return new PartialSignature(s)}static unserialize(e){return new PartialSignature(e.read(PartialSignature.SIZE))}serialize(e){(e=e||new SerialBuffer(this.serializedSize)).write(this._obj);return e}get serializedSize(){return PartialSignature.SIZE}equals(e){return e instanceof PartialSignature&&super.equals(e)}static _delinearizedPartialSignatureCreate(e,t,r,i,n,o){if(e.some(e=>e.byteLength!==PublicKey.SIZE)||t.byteLength!==PrivateKey.SIZE||r.byteLength!==PublicKey.SIZE||i.byteLength!==RandomSecret.SIZE||n.byteLength!==Commitment.SIZE)throw Error("Wrong buffer size.");const s=new Uint8Array(e.length*PublicKey.SIZE);for(let l=0;l<e.length;++l)s.set(e[l],l*PublicKey.SIZE);if(PlatformUtils.isNodeJs()){const a=new Uint8Array(PartialSignature.SIZE);NodeNative.node_ed25519_delinearized_partial_sign(a,new Uint8Array(o),new Uint8Array(n),new Uint8Array(i),new Uint8Array(s),e.length,new Uint8Array(r),new Uint8Array(t));return a}{let l;try{l=Module.stackSave();const c=Module.stackAlloc(PartialSignature.SIZE),u=Module.stackAlloc(s.length),f=Module.stackAlloc(t.length),h=Module.stackAlloc(r.length),d=Module.stackAlloc(i.length),_=Module.stackAlloc(n.length),g=Module.stackAlloc(o.length);new Uint8Array(Module.HEAPU8.buffer,u,s.length).set(s);new Uint8Array(Module.HEAPU8.buffer,f,t.length).set(t);new Uint8Array(Module.HEAPU8.buffer,h,r.length).set(r);new Uint8Array(Module.HEAPU8.buffer,d,i.length).set(i);new Uint8Array(Module.HEAPU8.buffer,_,n.length).set(n);new Uint8Array(Module.HEAPU8.buffer,g,o.length).set(o);Module._ed25519_delinearized_partial_sign(c,g,o.length,_,d,u,e.length,h,f);const p=new Uint8Array(PartialSignature.SIZE);p.set(new Uint8Array(Module.HEAPU8.buffer,c,PartialSignature.SIZE));return p}catch(a){Log.w(CryptoWorkerImpl,a);throw a}finally{l!==undefined&&Module.stackRestore(l)}}}}PartialSignature.SIZE=32;Class.register(PartialSignature);class Address extends Serializable{static copy(e){if(!e)return e;const t=new Uint8Array(e._obj);return new Address(t)}static fromHash(e){return new Address(e.subarray(0,Address.SERIALIZED_SIZE))}constructor(e){super();if(!(e instanceof Uint8Array))throw new Error("Primitive: Invalid type");if(e.length!==Address.SERIALIZED_SIZE)throw new Error("Primitive: Invalid length");this._obj=e}static unserialize(e){return new Address(e.read(Address.SERIALIZED_SIZE))}serialize(e){(e=e||new SerialBuffer(this.serializedSize)).write(this._obj);return e}subarray(e,t){return this._obj.subarray(e,t)}get serializedSize(){return Address.SERIALIZED_SIZE}equals(e){return e instanceof Address&&super.equals(e)}static fromString(e){try{return Address.fromUserFriendlyAddress(e)}catch(t){}try{return Address.fromHex(e)}catch(t){}try{return Address.fromBase64(e)}catch(t){}throw new Error("Invalid address format")}static fromBase64(e){return new Address(BufferUtils.fromBase64(e))}static fromHex(e){return new Address(BufferUtils.fromHex(e))}static fromUserFriendlyAddress(e){if((e=e.replace(/ /g,"")).substr(0,2).toUpperCase()!==Address.CCODE)throw new Error("Invalid Address: Wrong country code");if(36!==e.length)throw new Error("Invalid Address: Should be 36 chars (ignoring spaces)");if(1!==Address._ibanCheck(e.substr(4)+e.substr(0,4)))throw new Error("Invalid Address: Checksum invalid");return new Address(BufferUtils.fromBase32(e.substr(4)))}static _ibanCheck(e){const t=e.split("").map(e=>{const t=e.toUpperCase().charCodeAt(0);return t>=48&&t<=57?e:(t-55).toString()}).join("");let r="";for(let i=0;i<Math.ceil(t.length/6);i++)r=(parseInt(r+t.substr(6*i,6))%97).toString();return parseInt(r)}toUserFriendlyAddress(e=!0){const t=BufferUtils.toBase32(this.serialize()),r=("00"+(98-Address._ibanCheck(t+Address.CCODE+"00"))).slice(-2);let i=Address.CCODE+r+t;e&&(i=i.replace(/.{4}/g,"$& ").trim());return i}}Address.CCODE="NQ";Address.SERIALIZED_SIZE=20;Address.HEX_SIZE=40;Address.NULL=new Address(new Uint8Array(Address.SERIALIZED_SIZE));Address.CONTRACT_CREATION=new Address(new Uint8Array(Address.SERIALIZED_SIZE));Class.register(Address);class Account{constructor(e,t){if(!NumberUtils.isUint8(e))throw new Error("Malformed type");if(!NumberUtils.isUint64(t))throw new Error("Malformed balance");this._type=e;this._balance=t}static unserialize(e){const t=e.readUint8();e.readPos--;if(!Account.TYPE_MAP.has(t))throw new Error("Unknown account type");return Account.TYPE_MAP.get(t).unserialize(e)}serialize(e){(e=e||new SerialBuffer(this.serializedSize)).writeUint8(this._type);e.writeUint64(this._balance);return e}get serializedSize(){return 9}equals(e){return BufferUtils.equals(this.serialize(),e.serialize())}toString(){return`Account{type=${this._type}, balance=${this._balance.toString()}`}get balance(){return this._balance}get type(){return this._type}withBalance(e){throw new Error("Not yet implemented.")}withOutgoingTransaction(e,t,r,i=!1){if(i){if(t<e.validityStartHeight||t>=e.validityStartHeight+Policy.TRANSACTION_VALIDITY_WINDOW)throw new Error("Validity Error!");return this.withBalance(this._balance+e.value+e.fee)}{const i=this._balance-e.value-e.fee;if(i<0)throw new Error("Balance Error!");if(t<e.validityStartHeight||t>=e.validityStartHeight+Policy.TRANSACTION_VALIDITY_WINDOW)throw new Error("Validity Error!");if(r.containsTransaction(e))throw new Error("Double Transaction Error!");return this.withBalance(i)}}withIncomingTransaction(e,t,r=!1){if(r){const t=this._balance-e.value;if(t<0)throw new Error("Balance Error!");return this.withBalance(t)}return this.withBalance(this._balance+e.value)}withContractCommand(e,t,r=!1){throw new Error("Not yet implemented")}isInitial(){return this===Account.INITIAL}isToBePruned(){return 0===this._balance&&!this.isInitial()}}Account.Type={BASIC:0,VESTING:1,HTLC:2};Account.TYPE_MAP=new Map;Class.register(Account);class Transaction{constructor(e,t,r,i,n,o,s,a,l,c,u,f=GenesisConfig.NETWORK_ID){if(!(t instanceof Address))throw new Error("Malformed sender");if(!NumberUtils.isUint8(r))throw new Error("Malformed sender type");if(!(i instanceof Address))throw new Error("Malformed recipient");if(!NumberUtils.isUint8(n))throw new Error("Malformed recipient type");if(!NumberUtils.isUint64(o)||0===o)throw new Error("Malformed value");if(!NumberUtils.isUint64(s))throw new Error("Malformed fee");if(!NumberUtils.isUint32(a))throw new Error("Malformed validityStartHeight");if(!NumberUtils.isUint8(l)&&(l&~Transaction.Flag.ALL)>0)throw new Error("Malformed flags");if(!(c instanceof Uint8Array&&NumberUtils.isUint16(c.byteLength)))throw new Error("Malformed data");if(u&&(!(u instanceof Uint8Array)||!NumberUtils.isUint16(u.byteLength)))throw new Error("Malformed proof");if(!NumberUtils.isUint8(f))throw new Error("Malformed networkId");this._format=e;this._sender=t;this._senderType=r;this._recipient=i;this._recipientType=n;this._value=o;this._fee=s;this._networkId=f;this._validityStartHeight=a;this._flags=l;this._data=c;this._proof=u;this._recipient===Address.CONTRACT_CREATION&&(this._recipient=this.getContractCreationAddress())}static unserialize(e){const t=e.readUint8();e.readPos--;if(!Transaction.FORMAT_MAP.has(t))throw new Error("Invalid transaction type");return Transaction.FORMAT_MAP.get(t).unserialize(e)}serializeContent(e){(e=e||new SerialBuffer(this.serializedContentSize)).writeUint16(this._data.byteLength);e.write(this._data);this._sender.serialize(e);e.writeUint8(this._senderType);this._recipient.serialize(e);e.writeUint8(this._recipientType);e.writeUint64(this._value);e.writeUint64(this._fee);e.writeUint32(this._validityStartHeight);e.writeUint8(this._networkId);e.writeUint8(this._flags);return e}get serializedContentSize(){return 2+this._data.byteLength+this._sender.serializedSize+1+this._recipient.serializedSize+1+8+8+4+1+1}verify(e){this._valid===undefined&&(this._valid=this._verify(e));return this._valid}_verify(e=GenesisConfig.NETWORK_ID){if(this._networkId!==e){Log.w(Transaction,"Transaction is not valid in this network",this);return!1}if(this._recipient.equals(this._sender)){Log.w(Transaction,"Sender and recipient must not match",this);return!1}if(!Account.TYPE_MAP.has(this._senderType)||!Account.TYPE_MAP.has(this._recipientType)){Log.w(Transaction,"Invalid account type",this);return!1}if(!Account.TYPE_MAP.get(this._senderType).verifyOutgoingTransaction(this)){Log.w(Transaction,"Invalid for sender",this);return!1}if(!Account.TYPE_MAP.get(this._recipientType).verifyIncomingTransaction(this)){Log.w(Transaction,"Invalid for recipient",this);return!1}return!0}get serializedSize(){throw new Error("Getter needs to be overwritten by subclasses")}serialize(e){throw new Error("Method needs to be overwritten by subclasses")}hash(){this._hash=this._hash||Hash.light(this.serializeContent());return this._hash}compare(e){return this.fee/this.serializedSize>e.fee/e.serializedSize?-1:this.fee/this.serializedSize<e.fee/e.serializedSize?1:this.serializedSize>e.serializedSize?-1:this.serializedSize<e.serializedSize?1:this.fee>e.fee?-1:this.fee<e.fee?1:this.value>e.value?-1:this.value<e.value?1:this.compareBlockOrder(e)}compareBlockOrder(e){const t=this._recipient.compare(e._recipient);if(0!==t)return t;if(this._validityStartHeight<e._validityStartHeight)return-1;if(this._validityStartHeight>e._validityStartHeight)return 1;if(this._fee>e._fee)return-1;if(this._fee<e._fee)return 1;if(this._value>e._value)return-1;if(this._value<e._value)return 1;const r=this._sender.compare(e._sender);return 0!==r?r:this._recipientType<e._recipientType?-1:this._recipientType>e._recipientType?1:this._senderType<e._senderType?-1:this._senderType>e._senderType?1:this._flags<e._flags?-1:this._flags>e._flags?1:BufferUtils.compare(this._data,e._data)}equals(e){return e instanceof Transaction&&this._sender.equals(e._sender)&&this._senderType===e._senderType&&this._recipient.equals(e._recipient)&&this._recipientType===e._recipientType&&this._value===e._value&&this._fee===e._fee&&this._validityStartHeight===e._validityStartHeight&&this._networkId===e._networkId&&this._flags===e._flags&&BufferUtils.equals(this._data,e._data)}toString(){return"Transaction{"+`sender=${this._sender.toBase64()}, `+`recipient=${this._recipient.toBase64()}, `+`value=${this._value}, `+`fee=${this._fee}, `+`validityStartHeight=${this._validityStartHeight}, `+`networkId=${this._networkId}`+"}"}getContractCreationAddress(){const e=Transaction.unserialize(this.serialize());e._recipient=Address.NULL;e._hash=null;return Address.fromHash(e.hash())}get sender(){return this._sender}get senderType(){return this._senderType}get recipient(){return this._recipient}get recipientType(){return this._recipientType}get value(){return this._value}get fee(){return this._fee}get feePerByte(){return this._fee/this.serializedSize}get networkId(){return this._networkId}get validityStartHeight(){return this._validityStartHeight}get flags(){return this._flags}hasFlag(e){return(this._flags&e)>0}get data(){return this._data}get proof(){return this._proof}set proof(e){this._proof=e}}Transaction.Format={BASIC:0,EXTENDED:1};Transaction.Flag={NONE:0,CONTRACT_CREATION:1,ALL:1};Transaction.FORMAT_MAP=new Map;Class.register(Transaction);class SignatureProof{static verifyTransaction(e){try{const r=new SerialBuffer(e.proof),i=SignatureProof.unserialize(r);if(r.readPos!==r.byteLength){Log.w(SignatureProof,"Invalid SignatureProof - overlong");return!1}return i.verify(e.sender,e.serializeContent())}catch(t){Log.w(SignatureProof,`Failed to verify transaction: ${t.message||t}`,t);return!1}}static singleSig(e,t){return new SignatureProof(e,new MerklePath([]),t)}static multiSig(e,t,r){const i=MerklePath.compute(t,e);return new SignatureProof(e,i,r)}constructor(e,t,r){if(!(e instanceof PublicKey))throw new Error("Malformed publickKey");if(!(t instanceof MerklePath))throw new Error("Malformed merklePath");if(r&&!(r instanceof Signature))throw new Error("Malformed signature");this._publicKey=e;this._merklePath=t;this._signature=r}static unserialize(e){const t=PublicKey.unserialize(e),r=MerklePath.unserialize(e),i=Signature.unserialize(e);return new SignatureProof(t,r,i)}serialize(e){e=e||new SerialBuffer(this.serializedSize);this._publicKey.serialize(e);this._merklePath.serialize(e);this._signature&&this._signature.serialize(e);return e}get serializedSize(){return this._publicKey.serializedSize+this._merklePath.serializedSize+(this._signature?this._signature.serializedSize:0)}equals(e){return e instanceof SignatureProof&&this._publicKey.equals(e._publicKey)&&this._merklePath.equals(e._merklePath)&&(this._signature?this._signature.equals(e._signature):this._signature===e._signature)}verify(e,t){if(null!==e&&!this.isSignedBy(e)){Log.w(SignatureProof,"Invalid SignatureProof - signer does not match sender address");return!1}if(!this._signature){Log.w(SignatureProof,"Invalid SignatureProof - signature is missing");return!1}if(!this._signature.verify(this._publicKey,t)){Log.w(SignatureProof,"Invalid SignatureProof - signature is invalid");return!1}return!0}isSignedBy(e){const t=this._merklePath.computeRoot(this._publicKey);return Address.fromHash(t).equals(e)}get publicKey(){return this._publicKey}get merklePath(){return this._merklePath}get signature(){return this._signature}set signature(e){this._signature=e}}Class.register(SignatureProof);class BasicTransaction extends Transaction{constructor(e,t,r,i,n,o,s){if(!(e instanceof PublicKey))throw new Error("Malformed senderPubKey");if(o!==undefined&&!(o instanceof Signature))throw new Error("Malformed signature");const a=SignatureProof.singleSig(e,o);super(Transaction.Format.BASIC,e.toAddress(),Account.Type.BASIC,t,Account.Type.BASIC,r,i,n,Transaction.Flag.NONE,new Uint8Array(0),a.serialize(),s);this._signatureProof=a}static unserialize(e){const t=e.readUint8();Assert.that(t===Transaction.Format.BASIC);const r=PublicKey.unserialize(e),i=Address.unserialize(e),n=e.readUint64(),o=e.readUint64(),s=e.readUint32(),a=e.readUint8(),l=Signature.unserialize(e);return new BasicTransaction(r,i,n,o,s,l,a)}serialize(e){(e=e||new SerialBuffer(this.serializedSize)).writeUint8(Transaction.Format.BASIC);this.senderPubKey.serialize(e);this._recipient.serialize(e);e.writeUint64(this._value);e.writeUint64(this._fee);e.writeUint32(this._validityStartHeight);e.writeUint8(this._networkId);this.signature.serialize(e);return e}get serializedSize(){return 1+this.senderPubKey.serializedSize+this._recipient.serializedSize+8+8+4+1+this.signature.serializedSize}get senderPubKey(){return this._signatureProof.publicKey}get signature(){return this._signatureProof.signature}set signature(e){this._signatureProof.signature=e;this._proof=this._signatureProof.serialize()}}Transaction.FORMAT_MAP.set(Transaction.Format.BASIC,BasicTransaction);Class.register(BasicTransaction);class ExtendedTransaction extends Transaction{constructor(e,t,r,i,n,o,s,a,l,c=new Uint8Array(0),u){super(Transaction.Format.EXTENDED,e,t,r,i,n,o,s,a,l,c,u)}static unserialize(e){const t=e.readUint8();Assert.that(t===Transaction.Format.EXTENDED);const r=e.readUint16(),i=e.read(r),n=Address.unserialize(e),o=e.readUint8(),s=Address.unserialize(e),a=e.readUint8(),l=e.readUint64(),c=e.readUint64(),u=e.readUint32(),f=e.readUint8(),h=e.readUint8(),d=e.readUint16(),_=e.read(d);return new ExtendedTransaction(n,o,s,a,l,c,u,h,i,_,f)}serialize(e){(e=e||new SerialBuffer(this.serializedSize)).writeUint8(Transaction.Format.EXTENDED);this.serializeContent(e);e.writeUint16(this._proof.byteLength);e.write(this._proof);return e}get serializedSize(){return 1+this.serializedContentSize+2+this._proof.byteLength}}Transaction.FORMAT_MAP.set(Transaction.Format.EXTENDED,ExtendedTransaction);Class.register(ExtendedTransaction);class IWorker{static createProxy(e,t,r){return(0,_asyncToGenerator3["default"])(function*(){return new(IWorker.Proxy(e))(r,t)})()}static startWorkerForProxy(e,t,r){return(0,_asyncToGenerator3["default"])(function*(){if(IWorker._workersSupported){r||(r=`${Nimiq._path}worker.js`);return IWorker.createProxy(e,t,new Worker(window.URL.createObjectURL(new Blob([`Nimiq = {_path: '${Nimiq._path}'}; importScripts('${r.replace(/'/g,"")}');`]))))}yield IWorker._workerImplementation[e.name].init(t);return IWorker._workerImplementation[e.name]})()}static startWorkerPoolForProxy(e,t,r,i){return(0,_asyncToGenerator3["default"])(function*(){return new(IWorker.Pool(e))(function(t){return IWorker.startWorkerForProxy(e,t,i)},t,r).start()})()}static stubBaseOnMessage(e){return(0,_asyncToGenerator3["default"])(function*(){try{if("init"===e.data.command)if(IWorker._workerImplementation[e.data.args[0]]){const t=yield IWorker._workerImplementation[e.data.args[0]].init(e.data.args[1]);self.postMessage({status:"OK",result:t,id:e.data.id})}else self.postMessage({status:"error",result:"Unknown worker!",id:e.data.id});else self.postMessage({status:"error",result:"Worker not yet initialized!",id:e.data.id})}catch(t){self.postMessage({status:"error",result:t,id:e.data.id})}})()}static get _workersSupported(){return"undefined"!=typeof Worker}static get areWorkersAsync(){return IWorker._workersSupported}static get _insideWebWorker(){return"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope}static get _global(){return"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:null}static prepareForWorkerUse(e,t){IWorker._insideWebWorker&&(self.onmessage=IWorker.stubBaseOnMessage);IWorker._workerImplementation=IWorker._workerImplementation||{};IWorker._workerImplementation[e.name]=t}static _loadBrowserScript(e,t){const r=document.getElementsByTagName("head")[0],i=document.createElement("script");i.type="text/javascript";i.src=e;const n=()=>window.setTimeout(t,100);i.onreadystatechange=n;i.onload=n;r.appendChild(i)}static Proxy(e){const t=class extends e{constructor(t,r){super();this._name=r;this._messageId=0;this._worker=t;this._worker.onmessage=this._receive.bind(this);this._waiting=new Map;return this._invoke("init",[e.name,r]).then(()=>this)}_receive(e){const t=this._waiting.get(e.data.id);if(t){this._waiting["delete"](e.data.id);"OK"===e.data.status?t.resolve(e.data.result):"error"===e.data.status&&t.error(e.data.result)}else Log.w(WorkerProxy,"Unknown reply",e)}_invoke(e,t=[]){return new Promise((r,i)=>{const n={command:e,args:t,id:this._messageId++};this._waiting.set(n.id,{resolve:r,error:i});this._worker.postMessage(n)})}destroy(){return this._invoke("destroy")}};for(const r of Object.getOwnPropertyNames(e.prototype))"function"==typeof e.prototype[r]&&"constructor"!==r&&(t.prototype[r]=function(...e){return this._invoke(r,e)});return t}static Stub(e){const t=class extends e{constructor(){super()}_result(e,t,r){self.postMessage({status:t,result:r,id:e.data.id})}_onmessage(e){try{const r=this._invoke(e.data.command,e.data.args);r instanceof Promise?r.then(t=>{this._result(e,"OK",t)}):this._result(e,"OK",r)}catch(t){this._result(e,"error",t.message||t)}}init(e){this._name=e;if(IWorker._insideWebWorker){self.name=e;self.onmessage=(e=>this._onmessage(e))}}_invoke(e,t){return this[e].apply(this,t)}destroy(){IWorker._insideWebWorker&&self.close()}};for(const r of Object.getOwnPropertyNames(e.prototype))"function"==typeof e.prototype[r]&&"constructor"!==r&&(t.prototype[r]=function(){throw`Not implemented in IWorker Stub: ${r}`});return t}static Pool(e){const t=class extends e{constructor(e,t="pool",r=1){super();this._proxyInitializer=e;this._name=t;this._poolSize=r;this._workers=[];this._freeWorkers=[];this._waitingCalls=[]}start(){var e=this;return(0,_asyncToGenerator3["default"])(function*(){yield e._updateToSize();return e})()}get poolSize(){return this._poolSize}set poolSize(e){this._poolSize=e;this._updateToSize()["catch"](Log.w.tag(IWorker))}destroy(){this._poolSize=0;return this._updateToSize()}_invoke(e,t){return IWorker._workersSupported?new Promise((r,i)=>{this._waitingCalls.push({name:e,args:t,resolve:r,error:i});const n=this._freeWorkers.shift();n&&this._step(n)["catch"](Log.w.tag(IWorker))}):this._workers[0][e].apply(this._workers[0],t)}_step(e){var t=this;return(0,_asyncToGenerator3["default"])(function*(){let r=t._waitingCalls.shift();for(;r;){try{r.resolve(yield e[r.name].apply(e,r.args))}catch(i){r.error(i)}if(-1===t._workers.indexOf(e)){e.destroy();return}r=t._waitingCalls.shift()}t._freeWorkers.push(e)})()}_updateToSize(){var e=this;return(0,_asyncToGenerator3["default"])(function*(){if("undefined"==typeof Worker&&e._poolSize>1){Log.d(IWorker,"Pool of size larger than 1 requires WebWorker support.");e._poolSize=1}const t=[];for(;e._workers.length+t.length<e._poolSize;)t.push(e._proxyInitializer(`${e._name}#${e._workers.length+t.length}`));const r=yield Promise.all(t);for(const i of r){e._workers.push(i);e._step(i)["catch"](Log.w.tag(IWorker))}for(;e._workers.length>e._poolSize;){const t=e._freeWorkers.shift()||e._workers.pop(),r=e._workers.indexOf(t);if(r>=0){e._workers.splice(r,1);t.destroy()}}return e})()}};for(const r of Object.getOwnPropertyNames(e.prototype))"function"==typeof e.prototype[r]&&"constructor"!==r&&(t.prototype[r]=function(...e){return this._invoke(r,e)});return t}}IWorker._moduleLoadedCallbacks={};IWorker._workerImplementation={};Class.register(IWorker);class WasmHelper{static doImportBrowser(){return(0,_asyncToGenerator3["default"])(function*(){if(!PlatformUtils.isNodeJs())if(WasmHelper._importStarted)Log.e(WasmHelper,"doImportBrowser invoked twice");else{WasmHelper._importStarted=!0;(yield WasmHelper.importWasmBrowser("worker-wasm.wasm"))?yield WasmHelper.importScriptBrowser("worker-wasm.js"):yield WasmHelper.importScriptBrowser("worker-js.js");WasmHelper._importFinished=!0}})()}static doImportNodeJs(){PlatformUtils.isNodeJs()&&(WasmHelper.importWasmNodeJs("worker-wasm.wasm")?WasmHelper.importScriptNodeJs("worker-wasm.js"):WasmHelper.importScriptNodeJs("worker-js.js"))}static importWasmBrowser(e,t="Module"){e=WasmHelper._adjustWasmPath(e);if(!WasmHelper._global.WebAssembly){Log.w(WasmHelper,"No support for WebAssembly available.");return Promise.resolve(!1)}return new Promise(r=>{try{const n=new XMLHttpRequest;n.open("GET",e,!0);n.responseType="arraybuffer";n.onload=function(){WasmHelper._global[t]=WasmHelper._global[t]||{};WasmHelper._global[t].wasmBinary=n.response;r(!0)};n.onerror=function(){Log.w(WasmHelper,`Failed to access WebAssembly module ${e}`);r(!1)};n.send(null)}catch(i){Log.w(WasmHelper,`Failed to access WebAssembly module ${e}`);r(!1)}})}static importWasmNodeJs(e,t="Module"){e=WasmHelper._adjustWasmPath(e);if(!WasmHelper._global.WebAssembly){Log.w(WasmHelper,"No support for WebAssembly available.");return!1}const r=require("fs");try{const n=r.readFileSync(e);WasmHelper._global[t]=WasmHelper._global[t]||{};WasmHelper._global[t].wasmBinary=function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;++r)t[r]=e[r];return t}(n);return!0}catch(i){Log.w(WasmHelper,`Failed to access WebAssembly module ${e}: ${i}`);return!1}}static importScriptBrowser(e,t="Module"){if(t&&WasmHelper._global[t]&&WasmHelper._global[t].asm)return!1;e=WasmHelper._adjustScriptPath(e);const r=WasmHelper._global[t]||{};return new Promise((i=(0,_asyncToGenerator3["default"])(function*(i,n){t&&(r.onRuntimeInitialized=function(){return i(!0)});if("function"==typeof importScripts){yield new Promise(function(r){WasmHelper._moduleLoadedCallbacks[t]=r;importScripts(e)});WasmHelper._global[t]=WasmHelper._global[t](r);t||i(!0)}else if("object"==typeof window){yield new Promise(function(r){WasmHelper._moduleLoadedCallbacks[t]=r;WasmHelper._loadBrowserScript(e)});WasmHelper._global[t]=WasmHelper._global[t](r);t||i(!0)}else if("function"==typeof require){WasmHelper._global[t]=require(e)(r);t||i(!0)}else n("No way to load scripts.")}),function(e,t){return i.apply(this,arguments)}));var i}static importScriptNodeJs(e,t="Module"){if(t&&WasmHelper._global[t]&&WasmHelper._global[t].asm)return!1;e=WasmHelper._adjustScriptPath(e);const r=WasmHelper._global[t]||{};if("function"==typeof require){WasmHelper._global[t]=require(e)(r);if(!t)return!0}return!1}static fireModuleLoaded(e="Module"){if("function"==typeof WasmHelper._moduleLoadedCallbacks[e]){WasmHelper._moduleLoadedCallbacks[e]();WasmHelper._moduleLoadedCallbacks[e]=null}}static _loadBrowserScript(e){const t=document.getElementsByTagName("head")[0],r=document.createElement("script");r.type="text/javascript";r.src=e;t.appendChild(r)}static _adjustWasmPath(e){"undefined"!=typeof Nimiq&&Nimiq._path&&(e=`${Nimiq._path}${e}`);"string"==typeof __dirname&&-1===e.indexOf("/")&&(e=`${__dirname}/${e}`);return e}static _adjustScriptPath(e){"undefined"!=typeof Nimiq&&Nimiq._path&&(e=`${Nimiq._path}${e}`);"string"==typeof __dirname&&-1===e.indexOf("/")&&(e=`${__dirname}/${e}`);return e}static get _global(){return"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:null}}WasmHelper._moduleLoadedCallbacks={};Class.register(WasmHelper);class CryptoWorker{static get lib(){return CryptoLib.instance}static getInstanceAsync(){return(0,_asyncToGenerator3["default"])(function*(){CryptoWorker._workerAsync||(CryptoWorker._workerAsync=yield IWorker.startWorkerPoolForProxy(CryptoWorker,"crypto",4));return CryptoWorker._workerAsync})()}computeArgon2d(e){return(0,_asyncToGenerator3["default"])(function*(){})()}computeArgon2dBatch(e){return(0,_asyncToGenerator3["default"])(function*(){})()}kdf(e,t,r){return(0,_asyncToGenerator3["default"])(function*(){})()}blockVerify(e,t,r,i,n){return(0,_asyncToGenerator3["default"])(function*(){})()}}CryptoWorker._workerAsync=null;Class.register(CryptoWorker);class GenesisConfig{static main(){GenesisConfig.init(GenesisConfig.CONFIGS.main)}static test(){GenesisConfig.init(GenesisConfig.CONFIGS.test)}static dev(){GenesisConfig.init(GenesisConfig.CONFIGS.dev)}static bounty(){GenesisConfig.init(GenesisConfig.CONFIGS.bounty)}static init(e){if(GenesisConfig._config)throw new Error("GenesisConfig already initialized");if(!e.NETWORK_ID)throw new Error("Config is missing network id");if(!e.NETWORK_NAME)throw new Error("Config is missing network name");GenesisConfig._config=e}static get NETWORK_ID(){if(!GenesisConfig._config)throw new Error("GenesisConfig not initialized");return GenesisConfig._config.NETWORK_ID}static get NETWORK_NAME(){if(!GenesisConfig._config)throw new Error("GenesisConfig not initialized");return GenesisConfig._config.NETWORK_NAME}}Class.register(GenesisConfig);GenesisConfig.CONFIGS={main:{NETWORK_ID:42,NETWORK_NAME:"main"},test:{NETWORK_ID:1,NETWORK_NAME:"test"},dev:{NETWORK_ID:2,NETWORK_NAME:"dev"},bounty:{NETWORK_ID:3,NETWORK_NAME:"bounty"}};e._loaded=!0;"function"==typeof e._onload&&e._onload()}(Nimiq);
//# sourceMappingURL=web-offline-babel.js.map
